package minigmail;

import chat.Pregunta;
import chat.Usuarios;
import chat.usuario;
import com.sun.glass.events.KeyEvent;
import java.awt.Color;
import java.awt.Component;
import java.awt.GraphicsEnvironment;
import java.awt.HeadlessException;
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.PrintWriter;
import java.net.Socket;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.Random;
import java.util.Scanner;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.DefaultComboBoxModel;
import javax.swing.DefaultListModel;
import javax.swing.JColorChooser;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;
import javax.swing.text.Style;
import javax.swing.text.StyleConstants;
import javax.swing.text.StyledDocument;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeModel;
import javax.swing.tree.TreePath;

public class MiniGmail extends javax.swing.JFrame {

    Random random = new Random();

    /**
     * Creates new form MiniGmail
     */
    public MiniGmail() {
        contador = 0;
        miEstilo = "miEstilo";
        initComponents();
        colorFondo();

        panel.setVisible(false);
        panel_ingreso.setBackground(new Color(random.nextInt(255) + 1, random.nextInt(255) + 1, random.nextInt(255) + 1));
        cargarCuentas();

        barra_herramientas.setBounds((int) barra_herramientas.getBounds().getX(), (int) barra_herramientas.getBounds().getY(), WIDTH - (int) barra_herramientas.getBounds().getX(), (int) barra_herramientas.getBounds().getHeight());

        this.setLocationRelativeTo(null);
        //this.setExtendedState(MAXIMIZED_BOTH);
        //bt_signIn
        jd_crearCuenta.pack();

        doc = tp_texto.getStyledDocument();
        estilo = tp_texto.addStyle(miEstilo, null);

        DefaultComboBoxModel modelo = (DefaultComboBoxModel) cb_font.getModel();
        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        String fontNames[] = ge.getAvailableFontFamilyNames();
        for (String fontName : fontNames) {
            modelo.addElement(fontName);
        }
        cb_font.setModel(modelo);
        cb_font.setSelectedIndex(2);

    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jd_ingreso = new javax.swing.JDialog();
        panel_ingreso = new javax.swing.JPanel();
        bt_login = new javax.swing.JButton();
        cb_ingreso_cuentas = new javax.swing.JComboBox<>();
        pf_ingreso_clave = new javax.swing.JPasswordField();
        bt_showCrear = new javax.swing.JButton();
        jd_crearCuenta = new javax.swing.JDialog();
        jPanel1 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        tf_nombre = new javax.swing.JTextField();
        tf_apellido = new javax.swing.JTextField();
        tf_direccion = new javax.swing.JTextField();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        jLabel7 = new javax.swing.JLabel();
        pf_clave = new javax.swing.JPasswordField();
        pf_confirmacion = new javax.swing.JPasswordField();
        bt_crearCuenta = new javax.swing.JButton();
        jd_enviarCorreo = new javax.swing.JDialog();
        jScrollPane3 = new javax.swing.JScrollPane();
        tp_texto = new javax.swing.JTextPane();
        jToolBar1 = new javax.swing.JToolBar();
        cb_font = new javax.swing.JComboBox<>();
        cb_tamaño = new javax.swing.JComboBox<>();
        jSeparator2 = new javax.swing.JToolBar.Separator();
        bt_negrita = new javax.swing.JButton();
        bt_cursiva = new javax.swing.JButton();
        bt_subrayado = new javax.swing.JButton();
        jSeparator1 = new javax.swing.JToolBar.Separator();
        bt_resaltado = new javax.swing.JButton();
        bt_colorLetra = new javax.swing.JButton();
        jToolBar2 = new javax.swing.JToolBar();
        bt_abrirBorrador = new javax.swing.JButton();
        bt_guardarBorrador = new javax.swing.JButton();
        jLabel8 = new javax.swing.JLabel();
        tf_asunto = new javax.swing.JTextField();
        jScrollPane4 = new javax.swing.JScrollPane();
        list_destinatarios = new javax.swing.JList<>();
        cb_destinatarios = new javax.swing.JComboBox<>();
        bt_agregarDestinatario = new javax.swing.JButton();
        bt_eliminarDestinatario = new javax.swing.JButton();
        bt_enviarCorreo = new javax.swing.JButton();
        jd_abrirBorrador = new javax.swing.JDialog();
        jPanel2 = new javax.swing.JPanel();
        jScrollPane5 = new javax.swing.JScrollPane();
        lista_borradores = new javax.swing.JList<>();
        jLabel9 = new javax.swing.JLabel();
        bt_cargarBorrador = new javax.swing.JButton();
        pm_opcionesCorreo = new javax.swing.JPopupMenu();
        pmi_abrirCorreo = new javax.swing.JMenuItem();
        pmi_eliminarCorreo = new javax.swing.JMenuItem();
        pmi_marcarNoLeido = new javax.swing.JMenuItem();
        jd_adminCuenta = new javax.swing.JDialog();
        jPanel3 = new javax.swing.JPanel();
        jLabel10 = new javax.swing.JLabel();
        jLabel11 = new javax.swing.JLabel();
        jLabel12 = new javax.swing.JLabel();
        label_direccionCorreo = new javax.swing.JLabel();
        label_apellido = new javax.swing.JLabel();
        label_nombre = new javax.swing.JLabel();
        bt_cambiarApellido = new javax.swing.JButton();
        bt_cambiarNombre = new javax.swing.JButton();
        bt_cambiarDireccion = new javax.swing.JButton();
        bt_cambiarClave = new javax.swing.JButton();
        jLabel13 = new javax.swing.JLabel();
        bt_guardarCambios = new javax.swing.JButton();
        bt_cancelar = new javax.swing.JButton();
        bt_eliminarCuenta = new javax.swing.JButton();
        jd_cambiarClave = new javax.swing.JDialog();
        jPanel4 = new javax.swing.JPanel();
        jLabel14 = new javax.swing.JLabel();
        jLabel15 = new javax.swing.JLabel();
        pf_claveNueva = new javax.swing.JPasswordField();
        jLabel16 = new javax.swing.JLabel();
        pf_confirmacionNueva = new javax.swing.JPasswordField();
        jLabel17 = new javax.swing.JLabel();
        pf_claveActual = new javax.swing.JPasswordField();
        bt_nuevaClave = new javax.swing.JButton();
        jd_directorioCuentas = new javax.swing.JDialog();
        jScrollPane1 = new javax.swing.JScrollPane();
        tb_dir = new javax.swing.JTable();
        jToolBar3 = new javax.swing.JToolBar();
        bt_enviarCorreoDir = new javax.swing.JButton();
        jSeparator5 = new javax.swing.JToolBar.Separator();
        jButton1 = new javax.swing.JButton();
        jSeparator6 = new javax.swing.JToolBar.Separator();
        bt_agregarGrupoDir = new javax.swing.JButton();
        jSeparator7 = new javax.swing.JToolBar.Separator();
        bt_crearGrupoDir = new javax.swing.JButton();
        jLabel18 = new javax.swing.JLabel();
        tf_buscarNombre = new javax.swing.JTextField();
        jd_propiedades = new javax.swing.JDialog();
        jPanel5 = new javax.swing.JPanel();
        jPanel6 = new javax.swing.JPanel();
        jLabel19 = new javax.swing.JLabel();
        label_nombreP = new javax.swing.JLabel();
        jLabel21 = new javax.swing.JLabel();
        label_apellidoP = new javax.swing.JLabel();
        jLabel29 = new javax.swing.JLabel();
        label_direccionP = new javax.swing.JLabel();
        jLabel31 = new javax.swing.JLabel();
        label_fechaP = new javax.swing.JLabel();
        bt_enviarCorreoP = new javax.swing.JButton();
        bt_agregarGrupoP = new javax.swing.JButton();
        jd_chat = new javax.swing.JDialog();
        jScrollPane7 = new javax.swing.JScrollPane();
        ta_mensajes = new javax.swing.JTextArea();
        tf_mensaje = new javax.swing.JTextField();
        bt_enviarMensaje = new javax.swing.JButton();
        jLabel23 = new javax.swing.JLabel();
        jScrollPane8 = new javax.swing.JScrollPane();
        list_usuarios = new javax.swing.JList<>();
        cb_usuarios = new javax.swing.JComboBox<>();
        bt_agregarUsuario = new javax.swing.JButton();
        bt_eliminarUsuario = new javax.swing.JButton();
        jd_programarTarea = new javax.swing.JDialog();
        jSeparator4 = new javax.swing.JSeparator();
        jLabel24 = new javax.swing.JLabel();
        tf_asuntoTarea = new javax.swing.JTextField();
        jLabel25 = new javax.swing.JLabel();
        jdc_inicio = new com.toedter.calendar.JDateChooser();
        jLabel26 = new javax.swing.JLabel();
        jdc_final = new com.toedter.calendar.JDateChooser();
        cb_estado = new javax.swing.JComboBox<>();
        jLabel27 = new javax.swing.JLabel();
        jLabel28 = new javax.swing.JLabel();
        cb_prioridad = new javax.swing.JComboBox<>();
        jSeparator10 = new javax.swing.JSeparator();
        jScrollPane10 = new javax.swing.JScrollPane();
        ta_descripTarea = new javax.swing.JTextArea();
        jLabel33 = new javax.swing.JLabel();
        sp_horas = new javax.swing.JSpinner();
        jLabel34 = new javax.swing.JLabel();
        sp_minutos = new javax.swing.JSpinner();
        jLabel35 = new javax.swing.JLabel();
        jLabel36 = new javax.swing.JLabel();
        label_propietario = new javax.swing.JLabel();
        chb_lunes = new javax.swing.JCheckBox();
        chb_martes = new javax.swing.JCheckBox();
        chb_miercoles = new javax.swing.JCheckBox();
        chb_jueves = new javax.swing.JCheckBox();
        chb_viernes = new javax.swing.JCheckBox();
        chb_sabado = new javax.swing.JCheckBox();
        chb_domingo = new javax.swing.JCheckBox();
        chb_semanal = new javax.swing.JCheckBox();
        jLabel37 = new javax.swing.JLabel();
        rb_sinFecha = new javax.swing.JRadioButton();
        rb_despuesDeFecha = new javax.swing.JRadioButton();
        rb_despuesDeRep = new javax.swing.JRadioButton();
        jLabel38 = new javax.swing.JLabel();
        sp_repeticiones = new javax.swing.JSpinner();
        bt_guardarTarea = new javax.swing.JButton();
        bt_cancelarTarea = new javax.swing.JButton();
        jdc_finalRep = new com.toedter.calendar.JDateChooser();
        jd_nuevoGrupo = new javax.swing.JDialog();
        jLabel20 = new javax.swing.JLabel();
        jLabel22 = new javax.swing.JLabel();
        tf_nombreGrupo = new javax.swing.JTextField();
        bt_crearGrupo = new javax.swing.JButton();
        jd_abrirGrupos = new javax.swing.JDialog();
        jPanel7 = new javax.swing.JPanel();
        jScrollPane9 = new javax.swing.JScrollPane();
        lista_grupos = new javax.swing.JList<>();
        jLabel30 = new javax.swing.JLabel();
        bt_agregarFinal = new javax.swing.JButton();
        bt_enviarCorreoGrupal = new javax.swing.JButton();
        pm_eliminar = new javax.swing.JPopupMenu();
        jmi_eliminarDef = new javax.swing.JMenuItem();
        bg_finalTarea = new javax.swing.ButtonGroup();
        jd_filtros = new javax.swing.JDialog();
        jLabel32 = new javax.swing.JLabel();
        jScrollPane11 = new javax.swing.JScrollPane();
        list_filtros = new javax.swing.JList<>();
        sp_horasInicio = new javax.swing.JSpinner();
        jLabel39 = new javax.swing.JLabel();
        sp_minutosInicio = new javax.swing.JSpinner();
        jLabel40 = new javax.swing.JLabel();
        jLabel41 = new javax.swing.JLabel();
        sp_horasFinal = new javax.swing.JSpinner();
        jLabel42 = new javax.swing.JLabel();
        sp_minutosFinal = new javax.swing.JSpinner();
        jLabel43 = new javax.swing.JLabel();
        jLabel44 = new javax.swing.JLabel();
        bt_crearFiltroHora = new javax.swing.JButton();
        cb_filtrados = new javax.swing.JComboBox<>();
        bt_crearFiltroCuenta = new javax.swing.JButton();
        tf_asuntoFiltrado = new javax.swing.JTextField();
        bt_crearFiltroAsunto = new javax.swing.JButton();
        jLabel45 = new javax.swing.JLabel();
        jLabel46 = new javax.swing.JLabel();
        panel = new javax.swing.JPanel();
        barra_herramientas = new javax.swing.JToolBar();
        bt_mensajeNuevo = new javax.swing.JButton();
        jSeparator3 = new javax.swing.JToolBar.Separator();
        bt_chatear = new javax.swing.JButton();
        jSeparator8 = new javax.swing.JToolBar.Separator();
        bt_verGrupos = new javax.swing.JButton();
        jSeparator9 = new javax.swing.JToolBar.Separator();
        bt_programarTarea = new javax.swing.JButton();
        jSeparator11 = new javax.swing.JToolBar.Separator();
        bt_programarTarea1 = new javax.swing.JButton();
        jScrollPane2 = new javax.swing.JScrollPane();
        tp_mostrarCorreo = new javax.swing.JTextPane();
        label_personalizar = new javax.swing.JLabel();
        jScrollPane6 = new javax.swing.JScrollPane();
        jt_bandejas = new javax.swing.JTree();
        tf_mostrarAsunto = new javax.swing.JTextField();
        label_emisor = new javax.swing.JLabel();
        label_receptor = new javax.swing.JLabel();
        label_fechaEnvio = new javax.swing.JLabel();
        chb_leido = new javax.swing.JCheckBox();
        bt_limpiar = new javax.swing.JButton();
        menu_bar = new javax.swing.JMenuBar();
        jm_opciones = new javax.swing.JMenu();
        jmi_signIn = new javax.swing.JMenuItem();
        jmi_logOut = new javax.swing.JMenuItem();
        jmi_cuenta = new javax.swing.JMenuItem();
        jmi_dirCuentas = new javax.swing.JMenuItem();
        jm_ayuda = new javax.swing.JMenu();

        jd_ingreso.setTitle("Ingreso");
        jd_ingreso.setAlwaysOnTop(true);
        jd_ingreso.setResizable(false);
        jd_ingreso.setSize(new java.awt.Dimension(392, 300));
        jd_ingreso.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                jd_ingresoFocusLost(evt);
            }
        });

        panel_ingreso.setBackground(new java.awt.Color(204, 255, 204));

        bt_login.setText("Ingresar");
        bt_login.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_loginActionPerformed(evt);
            }
        });

        bt_showCrear.setText("Crear una cuenta");
        bt_showCrear.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_showCrearActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout panel_ingresoLayout = new javax.swing.GroupLayout(panel_ingreso);
        panel_ingreso.setLayout(panel_ingresoLayout);
        panel_ingresoLayout.setHorizontalGroup(
            panel_ingresoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panel_ingresoLayout.createSequentialGroup()
                .addGap(105, 105, 105)
                .addGroup(panel_ingresoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(bt_showCrear, javax.swing.GroupLayout.Alignment.CENTER, javax.swing.GroupLayout.PREFERRED_SIZE, 165, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(bt_login, javax.swing.GroupLayout.Alignment.CENTER, javax.swing.GroupLayout.PREFERRED_SIZE, 165, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(cb_ingreso_cuentas, 0, 184, Short.MAX_VALUE)
                    .addComponent(pf_ingreso_clave))
                .addGap(103, 103, 103))
        );
        panel_ingresoLayout.setVerticalGroup(
            panel_ingresoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panel_ingresoLayout.createSequentialGroup()
                .addGap(66, 66, 66)
                .addComponent(cb_ingreso_cuentas, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(pf_ingreso_clave, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(bt_login)
                .addGap(18, 18, 18)
                .addComponent(bt_showCrear)
                .addContainerGap(94, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout jd_ingresoLayout = new javax.swing.GroupLayout(jd_ingreso.getContentPane());
        jd_ingreso.getContentPane().setLayout(jd_ingresoLayout);
        jd_ingresoLayout.setHorizontalGroup(
            jd_ingresoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(panel_ingreso, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );
        jd_ingresoLayout.setVerticalGroup(
            jd_ingresoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(panel_ingreso, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );

        jd_crearCuenta.setTitle("Creación de cuenta");

        jPanel1.setBackground(new java.awt.Color(204, 255, 255));

        jLabel1.setText("Nombre:");

        jLabel2.setText("Apellido:");

        jLabel3.setText("Dirección de correo:");

        tf_direccion.setHorizontalAlignment(javax.swing.JTextField.RIGHT);

        jLabel4.setText("@minigmail.edu");

        jLabel5.setFont(new java.awt.Font("Leelawadee UI", 1, 24)); // NOI18N
        jLabel5.setForeground(new java.awt.Color(0, 0, 255));
        jLabel5.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel5.setText("Crear una Cuenta de Correo");

        jLabel6.setText("Clave:");

        jLabel7.setText("Confirmación de clave:");

        bt_crearCuenta.setBackground(new java.awt.Color(0, 0, 0));
        bt_crearCuenta.setForeground(new java.awt.Color(255, 255, 255));
        bt_crearCuenta.setText("Crear Cuenta");
        bt_crearCuenta.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));
        bt_crearCuenta.setBorderPainted(false);
        bt_crearCuenta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_crearCuentaActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(bt_crearCuenta, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel1, javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jLabel2, javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jLabel3, javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jLabel6, javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jLabel7, javax.swing.GroupLayout.Alignment.TRAILING))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(tf_direccion)
                            .addComponent(pf_clave)
                            .addComponent(pf_confirmacion)
                            .addComponent(tf_apellido)
                            .addComponent(tf_nombre))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel4))
                    .addComponent(jLabel5, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 423, Short.MAX_VALUE))
                .addContainerGap())
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel5)
                .addGap(50, 50, 50)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(tf_nombre, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel1))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(tf_apellido, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel3)
                    .addComponent(tf_direccion, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel4))
                .addGap(18, 18, 18)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel6)
                    .addComponent(pf_clave, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel7)
                    .addComponent(pf_confirmacion, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(32, 32, 32)
                .addComponent(bt_crearCuenta)
                .addContainerGap(23, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout jd_crearCuentaLayout = new javax.swing.GroupLayout(jd_crearCuenta.getContentPane());
        jd_crearCuenta.getContentPane().setLayout(jd_crearCuentaLayout);
        jd_crearCuentaLayout.setHorizontalGroup(
            jd_crearCuentaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        jd_crearCuentaLayout.setVerticalGroup(
            jd_crearCuentaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );

        jd_enviarCorreo.setTitle("Envío de correos");

        tp_texto.setFont(new java.awt.Font("Arial", 0, 18)); // NOI18N
        jScrollPane3.setViewportView(tp_texto);

        jToolBar1.setRollover(true);

        cb_font.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                cb_fontItemStateChanged(evt);
            }
        });
        jToolBar1.add(cb_font);

        cb_tamaño.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "12", "18", "24", "36", "48", "60", "72" }));
        cb_tamaño.setSelectedIndex(1);
        cb_tamaño.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cb_tamañoActionPerformed(evt);
            }
        });
        jToolBar1.add(cb_tamaño);
        jToolBar1.add(jSeparator2);

        bt_negrita.setIcon(new javax.swing.ImageIcon(getClass().getResource("/iconos/negrita.png"))); // NOI18N
        bt_negrita.setToolTipText("");
        bt_negrita.setFocusable(false);
        bt_negrita.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        bt_negrita.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        bt_negrita.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                bt_negritaMouseClicked(evt);
            }
        });
        jToolBar1.add(bt_negrita);

        bt_cursiva.setIcon(new javax.swing.ImageIcon(getClass().getResource("/iconos/Cursiva.png"))); // NOI18N
        bt_cursiva.setFocusable(false);
        bt_cursiva.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        bt_cursiva.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        bt_cursiva.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                bt_cursivaMouseClicked(evt);
            }
        });
        jToolBar1.add(bt_cursiva);

        bt_subrayado.setIcon(new javax.swing.ImageIcon(getClass().getResource("/iconos/Subrayado.png"))); // NOI18N
        bt_subrayado.setFocusable(false);
        bt_subrayado.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        bt_subrayado.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        bt_subrayado.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                bt_subrayadoMouseClicked(evt);
            }
        });
        jToolBar1.add(bt_subrayado);
        jToolBar1.add(jSeparator1);

        bt_resaltado.setIcon(new javax.swing.ImageIcon(getClass().getResource("/iconos/fondo.png"))); // NOI18N
        bt_resaltado.setFocusable(false);
        bt_resaltado.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        bt_resaltado.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        bt_resaltado.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                bt_resaltadoMouseClicked(evt);
            }
        });
        jToolBar1.add(bt_resaltado);

        bt_colorLetra.setIcon(new javax.swing.ImageIcon(getClass().getResource("/iconos/letra.png"))); // NOI18N
        bt_colorLetra.setFocusable(false);
        bt_colorLetra.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        bt_colorLetra.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        bt_colorLetra.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                bt_colorLetraMouseClicked(evt);
            }
        });
        jToolBar1.add(bt_colorLetra);

        jToolBar2.setRollover(true);

        bt_abrirBorrador.setIcon(new javax.swing.ImageIcon(getClass().getResource("/iconos/abrir.png"))); // NOI18N
        bt_abrirBorrador.setText("Abrir Borrador");
        bt_abrirBorrador.setFocusable(false);
        bt_abrirBorrador.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        bt_abrirBorrador.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        bt_abrirBorrador.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_abrirBorradorActionPerformed(evt);
            }
        });
        jToolBar2.add(bt_abrirBorrador);

        bt_guardarBorrador.setIcon(new javax.swing.ImageIcon(getClass().getResource("/iconos/guardar.png"))); // NOI18N
        bt_guardarBorrador.setText("Guardar como Borrador");
        bt_guardarBorrador.setFocusable(false);
        bt_guardarBorrador.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        bt_guardarBorrador.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        bt_guardarBorrador.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_guardarBorradorActionPerformed(evt);
            }
        });
        jToolBar2.add(bt_guardarBorrador);

        jLabel8.setText("ASUNTO:");

        list_destinatarios.setModel(new DefaultListModel());
        jScrollPane4.setViewportView(list_destinatarios);
        list_destinatarios.getAccessibleContext().setAccessibleName("");

        bt_agregarDestinatario.setText("Agregar Destinatario");
        bt_agregarDestinatario.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_agregarDestinatarioActionPerformed(evt);
            }
        });

        bt_eliminarDestinatario.setText("Eliminar Destinatario");
        bt_eliminarDestinatario.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_eliminarDestinatarioActionPerformed(evt);
            }
        });

        bt_enviarCorreo.setBackground(new java.awt.Color(255, 0, 0));
        bt_enviarCorreo.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        bt_enviarCorreo.setText("Enviar Correo");
        bt_enviarCorreo.setBorder(new javax.swing.border.MatteBorder(null));
        bt_enviarCorreo.setBorderPainted(false);
        bt_enviarCorreo.setFocusable(false);
        bt_enviarCorreo.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        bt_enviarCorreo.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        bt_enviarCorreo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_enviarCorreoActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jd_enviarCorreoLayout = new javax.swing.GroupLayout(jd_enviarCorreo.getContentPane());
        jd_enviarCorreo.getContentPane().setLayout(jd_enviarCorreoLayout);
        jd_enviarCorreoLayout.setHorizontalGroup(
            jd_enviarCorreoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jd_enviarCorreoLayout.createSequentialGroup()
                .addGap(59, 59, 59)
                .addComponent(jToolBar1, javax.swing.GroupLayout.PREFERRED_SIZE, 590, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addGroup(jd_enviarCorreoLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jd_enviarCorreoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jd_enviarCorreoLayout.createSequentialGroup()
                        .addGap(0, 6, Short.MAX_VALUE)
                        .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, 890, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jd_enviarCorreoLayout.createSequentialGroup()
                        .addComponent(jLabel8)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(tf_asunto)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(cb_destinatarios, javax.swing.GroupLayout.PREFERRED_SIZE, 258, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGroup(jd_enviarCorreoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jd_enviarCorreoLayout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jd_enviarCorreoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jScrollPane4)
                            .addComponent(bt_enviarCorreo, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addGroup(jd_enviarCorreoLayout.createSequentialGroup()
                                .addComponent(bt_agregarDestinatario)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(bt_eliminarDestinatario)
                                .addGap(0, 6, Short.MAX_VALUE)))
                        .addContainerGap())
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jd_enviarCorreoLayout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jToolBar2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(39, 39, 39))))
        );
        jd_enviarCorreoLayout.setVerticalGroup(
            jd_enviarCorreoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jd_enviarCorreoLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jToolBar1, javax.swing.GroupLayout.PREFERRED_SIZE, 68, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 9, Short.MAX_VALUE)
                .addGroup(jd_enviarCorreoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel8)
                    .addComponent(tf_asunto, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(cb_destinatarios, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(bt_agregarDestinatario)
                    .addComponent(bt_eliminarDestinatario))
                .addGap(18, 18, 18)
                .addGroup(jd_enviarCorreoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, 442, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jd_enviarCorreoLayout.createSequentialGroup()
                        .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, 233, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(bt_enviarCorreo, javax.swing.GroupLayout.PREFERRED_SIZE, 40, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(jToolBar2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap())
        );

        jd_abrirBorrador.setTitle("Borradores");

        jPanel2.setBackground(new java.awt.Color(255, 255, 153));

        lista_borradores.setModel(new DefaultListModel());
        jScrollPane5.setViewportView(lista_borradores);

        jLabel9.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jLabel9.setForeground(new java.awt.Color(255, 0, 0));
        jLabel9.setText("Borradores Guardados");

        bt_cargarBorrador.setBackground(new java.awt.Color(255, 0, 51));
        bt_cargarBorrador.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        bt_cargarBorrador.setForeground(new java.awt.Color(255, 255, 0));
        bt_cargarBorrador.setText("Abrir");
        bt_cargarBorrador.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));
        bt_cargarBorrador.setBorderPainted(false);
        bt_cargarBorrador.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_cargarBorradorActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.CENTER)
                    .addComponent(bt_cargarBorrador, javax.swing.GroupLayout.PREFERRED_SIZE, 56, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jScrollPane5, javax.swing.GroupLayout.PREFERRED_SIZE, 243, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel9))
                .addContainerGap())
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel9)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane5, javax.swing.GroupLayout.PREFERRED_SIZE, 246, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(bt_cargarBorrador)
                .addGap(6, 6, 6))
        );

        javax.swing.GroupLayout jd_abrirBorradorLayout = new javax.swing.GroupLayout(jd_abrirBorrador.getContentPane());
        jd_abrirBorrador.getContentPane().setLayout(jd_abrirBorradorLayout);
        jd_abrirBorradorLayout.setHorizontalGroup(
            jd_abrirBorradorLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel2, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        jd_abrirBorradorLayout.setVerticalGroup(
            jd_abrirBorradorLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jd_abrirBorradorLayout.createSequentialGroup()
                .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );

        pmi_abrirCorreo.setText("Abrir correo");
        pmi_abrirCorreo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                pmi_abrirCorreoActionPerformed(evt);
            }
        });
        pm_opcionesCorreo.add(pmi_abrirCorreo);

        pmi_eliminarCorreo.setText("Eliminar correo");
        pmi_eliminarCorreo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                pmi_eliminarCorreoActionPerformed(evt);
            }
        });
        pm_opcionesCorreo.add(pmi_eliminarCorreo);

        pmi_marcarNoLeido.setText("Marcar como no leído");
        pmi_marcarNoLeido.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                pmi_marcarNoLeidoActionPerformed(evt);
            }
        });
        pm_opcionesCorreo.add(pmi_marcarNoLeido);

        jd_adminCuenta.setTitle("Mi Cuenta");

        jPanel3.setBackground(new java.awt.Color(0, 204, 204));

        jLabel10.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel10.setForeground(new java.awt.Color(255, 255, 255));
        jLabel10.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabel10.setText("Nombre:");

        jLabel11.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel11.setForeground(new java.awt.Color(255, 255, 255));
        jLabel11.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabel11.setText("Apellido:");

        jLabel12.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel12.setForeground(new java.awt.Color(255, 255, 255));
        jLabel12.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabel12.setText("Dirección de correo:");

        label_direccionCorreo.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N

        label_apellido.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N

        label_nombre.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N

        bt_cambiarApellido.setBackground(new java.awt.Color(255, 153, 0));
        bt_cambiarApellido.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        bt_cambiarApellido.setText("Cambiar");
        bt_cambiarApellido.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_cambiarApellidoActionPerformed(evt);
            }
        });

        bt_cambiarNombre.setBackground(new java.awt.Color(255, 153, 0));
        bt_cambiarNombre.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        bt_cambiarNombre.setText("Cambiar");
        bt_cambiarNombre.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_cambiarNombreActionPerformed(evt);
            }
        });

        bt_cambiarDireccion.setBackground(new java.awt.Color(255, 153, 0));
        bt_cambiarDireccion.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        bt_cambiarDireccion.setText("Cambiar");
        bt_cambiarDireccion.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_cambiarDireccionActionPerformed(evt);
            }
        });

        bt_cambiarClave.setBackground(new java.awt.Color(255, 153, 0));
        bt_cambiarClave.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        bt_cambiarClave.setText("Cambiar clave");
        bt_cambiarClave.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_cambiarClaveActionPerformed(evt);
            }
        });

        jLabel13.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabel13.setForeground(new java.awt.Color(255, 255, 255));
        jLabel13.setText("Mi Cuenta");

        bt_guardarCambios.setBackground(new java.awt.Color(51, 0, 255));
        bt_guardarCambios.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        bt_guardarCambios.setForeground(new java.awt.Color(255, 255, 0));
        bt_guardarCambios.setText("Guardar Cambios");
        bt_guardarCambios.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_guardarCambiosActionPerformed(evt);
            }
        });

        bt_cancelar.setBackground(new java.awt.Color(255, 0, 0));
        bt_cancelar.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        bt_cancelar.setForeground(new java.awt.Color(255, 255, 255));
        bt_cancelar.setText("Cancelar");
        bt_cancelar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_cancelarActionPerformed(evt);
            }
        });

        bt_eliminarCuenta.setBackground(new java.awt.Color(255, 0, 0));
        bt_eliminarCuenta.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        bt_eliminarCuenta.setForeground(new java.awt.Color(255, 255, 255));
        bt_eliminarCuenta.setText("Eliminar Cuenta");
        bt_eliminarCuenta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_eliminarCuentaActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                .addComponent(jLabel12, javax.swing.GroupLayout.DEFAULT_SIZE, 122, Short.MAX_VALUE)
                                .addComponent(jLabel10, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                            .addComponent(jLabel11, javax.swing.GroupLayout.PREFERRED_SIZE, 122, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(label_nombre, javax.swing.GroupLayout.DEFAULT_SIZE, 168, Short.MAX_VALUE)
                            .addComponent(label_apellido, javax.swing.GroupLayout.DEFAULT_SIZE, 168, Short.MAX_VALUE)
                            .addComponent(label_direccionCorreo, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(bt_cambiarNombre, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addGap(4, 4, 4)
                                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(bt_cambiarDireccion, javax.swing.GroupLayout.PREFERRED_SIZE, 101, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(bt_cambiarApellido, javax.swing.GroupLayout.PREFERRED_SIZE, 102, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGap(0, 0, Short.MAX_VALUE)))
                        .addGap(10, 10, 10))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addComponent(jLabel13)
                        .addGap(154, 154, 154))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                                .addGap(0, 0, Short.MAX_VALUE)
                                .addComponent(bt_guardarCambios, javax.swing.GroupLayout.PREFERRED_SIZE, 199, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(bt_cambiarClave, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                                .addComponent(bt_eliminarCuenta, javax.swing.GroupLayout.PREFERRED_SIZE, 199, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(bt_cancelar, javax.swing.GroupLayout.PREFERRED_SIZE, 199, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addContainerGap())))
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel13)
                .addGap(18, 18, 18)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                        .addComponent(jLabel10)
                        .addComponent(label_nombre, javax.swing.GroupLayout.PREFERRED_SIZE, 15, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(bt_cambiarNombre))
                .addGap(26, 26, 26)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                        .addComponent(jLabel11)
                        .addComponent(label_apellido, javax.swing.GroupLayout.PREFERRED_SIZE, 15, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(bt_cambiarApellido))
                .addGap(18, 18, 18)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel12)
                            .addComponent(label_direccionCorreo, javax.swing.GroupLayout.PREFERRED_SIZE, 15, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addComponent(bt_cambiarClave)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(bt_guardarCambios)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(bt_cancelar)
                            .addComponent(bt_eliminarCuenta)))
                    .addComponent(bt_cambiarDireccion))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout jd_adminCuentaLayout = new javax.swing.GroupLayout(jd_adminCuenta.getContentPane());
        jd_adminCuenta.getContentPane().setLayout(jd_adminCuentaLayout);
        jd_adminCuentaLayout.setHorizontalGroup(
            jd_adminCuentaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel3, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        jd_adminCuentaLayout.setVerticalGroup(
            jd_adminCuentaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        jd_cambiarClave.setTitle("Cambio de clave");

        jPanel4.setBackground(new java.awt.Color(153, 102, 255));

        jLabel14.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabel14.setForeground(new java.awt.Color(255, 255, 255));
        jLabel14.setText("Mi Cuenta");

        jLabel15.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel15.setForeground(new java.awt.Color(255, 255, 255));
        jLabel15.setText("Nueva clave:");

        jLabel16.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel16.setForeground(new java.awt.Color(255, 255, 255));
        jLabel16.setText("Confirmación de nueva clave:");

        jLabel17.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel17.setForeground(new java.awt.Color(255, 255, 255));
        jLabel17.setText("Clave actual:");

        bt_nuevaClave.setBackground(new java.awt.Color(255, 255, 255));
        bt_nuevaClave.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        bt_nuevaClave.setForeground(new java.awt.Color(102, 0, 204));
        bt_nuevaClave.setText("Cabiar Clave");
        bt_nuevaClave.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        bt_nuevaClave.setBorderPainted(false);
        bt_nuevaClave.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_nuevaClaveActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel4Layout = new javax.swing.GroupLayout(jPanel4);
        jPanel4.setLayout(jPanel4Layout);
        jPanel4Layout.setHorizontalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addGap(153, 153, 153)
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.CENTER)
                    .addComponent(bt_nuevaClave, javax.swing.GroupLayout.PREFERRED_SIZE, 93, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel14))
                .addContainerGap(149, Short.MAX_VALUE))
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addGap(23, 23, 23)
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel15)
                    .addComponent(jLabel16)
                    .addComponent(jLabel17))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(pf_claveActual, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(pf_claveNueva, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(pf_confirmacionNueva, javax.swing.GroupLayout.Alignment.TRAILING))
                .addGap(10, 10, 10))
        );
        jPanel4Layout.setVerticalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel14)
                .addGap(30, 30, 30)
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel17)
                    .addComponent(pf_claveActual, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel15)
                    .addComponent(pf_claveNueva, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel16)
                    .addComponent(pf_confirmacionNueva, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(30, 30, 30)
                .addComponent(bt_nuevaClave)
                .addContainerGap(21, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout jd_cambiarClaveLayout = new javax.swing.GroupLayout(jd_cambiarClave.getContentPane());
        jd_cambiarClave.getContentPane().setLayout(jd_cambiarClaveLayout);
        jd_cambiarClaveLayout.setHorizontalGroup(
            jd_cambiarClaveLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        jd_cambiarClaveLayout.setVerticalGroup(
            jd_cambiarClaveLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );

        jd_directorioCuentas.setTitle("Directorio de cuentas");

        tb_dir.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Nombre", "Apellido", "Dirección de correo", "Fecha de creación"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.String.class, java.lang.String.class, java.lang.Object.class, java.lang.Object.class
            };
            boolean[] canEdit = new boolean [] {
                false, false, false, false
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        tb_dir.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tb_dirMouseClicked(evt);
            }
        });
        jScrollPane1.setViewportView(tb_dir);

        jToolBar3.setRollover(true);

        bt_enviarCorreoDir.setText("Enviar Correo");
        bt_enviarCorreoDir.setFocusable(false);
        bt_enviarCorreoDir.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        bt_enviarCorreoDir.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        bt_enviarCorreoDir.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_enviarCorreoDirActionPerformed(evt);
            }
        });
        jToolBar3.add(bt_enviarCorreoDir);
        jToolBar3.add(jSeparator5);

        jButton1.setText("Propiedades");
        jButton1.setFocusable(false);
        jButton1.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        jButton1.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        jToolBar3.add(jButton1);
        jToolBar3.add(jSeparator6);

        bt_agregarGrupoDir.setText("Agregar a Grupo");
        bt_agregarGrupoDir.setFocusable(false);
        bt_agregarGrupoDir.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        bt_agregarGrupoDir.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        bt_agregarGrupoDir.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_agregarGrupoDirActionPerformed(evt);
            }
        });
        jToolBar3.add(bt_agregarGrupoDir);
        jToolBar3.add(jSeparator7);

        bt_crearGrupoDir.setText("Nuevo Grupo");
        bt_crearGrupoDir.setFocusable(false);
        bt_crearGrupoDir.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        bt_crearGrupoDir.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        bt_crearGrupoDir.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_crearGrupoDirActionPerformed(evt);
            }
        });
        jToolBar3.add(bt_crearGrupoDir);

        jLabel18.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel18.setText("Escriba un nombre o selecciónelo en la lista:");

        tf_buscarNombre.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                tf_buscarNombreKeyPressed(evt);
            }
        });

        javax.swing.GroupLayout jd_directorioCuentasLayout = new javax.swing.GroupLayout(jd_directorioCuentas.getContentPane());
        jd_directorioCuentas.getContentPane().setLayout(jd_directorioCuentasLayout);
        jd_directorioCuentasLayout.setHorizontalGroup(
            jd_directorioCuentasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jd_directorioCuentasLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jd_directorioCuentasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 730, Short.MAX_VALUE)
                    .addComponent(jToolBar3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(jd_directorioCuentasLayout.createSequentialGroup()
                        .addComponent(jLabel18)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(tf_buscarNombre, javax.swing.GroupLayout.PREFERRED_SIZE, 180, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(0, 0, Short.MAX_VALUE)))
                .addContainerGap())
        );
        jd_directorioCuentasLayout.setVerticalGroup(
            jd_directorioCuentasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jd_directorioCuentasLayout.createSequentialGroup()
                .addContainerGap(21, Short.MAX_VALUE)
                .addComponent(jToolBar3, javax.swing.GroupLayout.PREFERRED_SIZE, 56, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jd_directorioCuentasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jLabel18, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(tf_buscarNombre, javax.swing.GroupLayout.DEFAULT_SIZE, 27, Short.MAX_VALUE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 327, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );

        jPanel5.setBackground(new java.awt.Color(204, 255, 255));

        jPanel6.setBackground(new java.awt.Color(255, 255, 255));
        jPanel6.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)));

        jLabel19.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        jLabel19.setText("Nombre:");

        label_nombreP.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        label_nombreP.setForeground(new java.awt.Color(0, 0, 255));

        jLabel21.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        jLabel21.setText("Apellido:");

        label_apellidoP.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        label_apellidoP.setForeground(new java.awt.Color(0, 0, 255));

        jLabel29.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        jLabel29.setText("Correo:");

        label_direccionP.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        label_direccionP.setForeground(new java.awt.Color(0, 0, 255));

        jLabel31.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        jLabel31.setText("Creación:");

        label_fechaP.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        label_fechaP.setForeground(new java.awt.Color(0, 0, 255));

        bt_enviarCorreoP.setText("Enviar Correo");
        bt_enviarCorreoP.setFocusable(false);
        bt_enviarCorreoP.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        bt_enviarCorreoP.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        bt_enviarCorreoP.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_enviarCorreoPActionPerformed(evt);
            }
        });

        bt_agregarGrupoP.setText("Agregar a Grupo");
        bt_agregarGrupoP.setFocusable(false);
        bt_agregarGrupoP.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        bt_agregarGrupoP.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        bt_agregarGrupoP.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_agregarGrupoPActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel6Layout = new javax.swing.GroupLayout(jPanel6);
        jPanel6.setLayout(jPanel6Layout);
        jPanel6Layout.setHorizontalGroup(
            jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel6Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel6Layout.createSequentialGroup()
                        .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(jLabel19, javax.swing.GroupLayout.Alignment.TRAILING)
                                .addComponent(jLabel21, javax.swing.GroupLayout.Alignment.TRAILING))
                            .addComponent(jLabel29)
                            .addComponent(jLabel31))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(label_fechaP, javax.swing.GroupLayout.PREFERRED_SIZE, 174, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(label_direccionP, javax.swing.GroupLayout.PREFERRED_SIZE, 174, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(label_apellidoP, javax.swing.GroupLayout.PREFERRED_SIZE, 180, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(label_nombreP, javax.swing.GroupLayout.PREFERRED_SIZE, 180, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(0, 10, Short.MAX_VALUE))
                    .addGroup(jPanel6Layout.createSequentialGroup()
                        .addComponent(bt_enviarCorreoP, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(bt_agregarGrupoP)))
                .addContainerGap())
        );
        jPanel6Layout.setVerticalGroup(
            jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel6Layout.createSequentialGroup()
                .addGap(30, 30, 30)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel19)
                    .addComponent(label_nombreP, javax.swing.GroupLayout.PREFERRED_SIZE, 15, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel21)
                    .addComponent(label_apellidoP, javax.swing.GroupLayout.PREFERRED_SIZE, 15, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel29)
                    .addComponent(label_direccionP, javax.swing.GroupLayout.PREFERRED_SIZE, 15, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel31)
                    .addComponent(label_fechaP, javax.swing.GroupLayout.PREFERRED_SIZE, 15, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(bt_enviarCorreoP)
                    .addComponent(bt_agregarGrupoP))
                .addContainerGap(82, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout jPanel5Layout = new javax.swing.GroupLayout(jPanel5);
        jPanel5.setLayout(jPanel5Layout);
        jPanel5Layout.setHorizontalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel5Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel6, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );
        jPanel5Layout.setVerticalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel5Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel6, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );

        javax.swing.GroupLayout jd_propiedadesLayout = new javax.swing.GroupLayout(jd_propiedades.getContentPane());
        jd_propiedades.getContentPane().setLayout(jd_propiedadesLayout);
        jd_propiedadesLayout.setHorizontalGroup(
            jd_propiedadesLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel5, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        jd_propiedadesLayout.setVerticalGroup(
            jd_propiedadesLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel5, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        jd_chat.setTitle("Chat");
        jd_chat.addComponentListener(new java.awt.event.ComponentAdapter() {
            public void componentHidden(java.awt.event.ComponentEvent evt) {
                jd_chatComponentHidden(evt);
            }
        });

        ta_mensajes.setEditable(false);
        ta_mensajes.setColumns(20);
        ta_mensajes.setRows(5);
        ta_mensajes.addPropertyChangeListener(new java.beans.PropertyChangeListener() {
            public void propertyChange(java.beans.PropertyChangeEvent evt) {
                ta_mensajesPropertyChange(evt);
            }
        });
        jScrollPane7.setViewportView(ta_mensajes);

        bt_enviarMensaje.setBackground(new java.awt.Color(0, 153, 51));
        bt_enviarMensaje.setText("Enviar");
        bt_enviarMensaje.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_enviarMensajeActionPerformed(evt);
            }
        });

        jLabel23.setFont(new java.awt.Font("Dialog", 1, 24)); // NOI18N
        jLabel23.setForeground(new java.awt.Color(0, 204, 255));
        jLabel23.setText("Sistema de Chats!!!");

        list_usuarios.setModel(new DefaultListModel());
        jScrollPane8.setViewportView(list_usuarios);

        cb_usuarios.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                cb_usuariosItemStateChanged(evt);
            }
        });

        bt_agregarUsuario.setText("+");
        bt_agregarUsuario.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_agregarUsuarioActionPerformed(evt);
            }
        });

        bt_eliminarUsuario.setText("-");
        bt_eliminarUsuario.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_eliminarUsuarioActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jd_chatLayout = new javax.swing.GroupLayout(jd_chat.getContentPane());
        jd_chat.getContentPane().setLayout(jd_chatLayout);
        jd_chatLayout.setHorizontalGroup(
            jd_chatLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jd_chatLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jd_chatLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jd_chatLayout.createSequentialGroup()
                        .addComponent(jScrollPane7, javax.swing.GroupLayout.PREFERRED_SIZE, 345, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jd_chatLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jScrollPane8, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE)
                            .addGroup(jd_chatLayout.createSequentialGroup()
                                .addComponent(bt_agregarUsuario)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 65, Short.MAX_VALUE)
                                .addComponent(bt_eliminarUsuario))
                            .addComponent(cb_usuarios, javax.swing.GroupLayout.Alignment.TRAILING, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                    .addGroup(jd_chatLayout.createSequentialGroup()
                        .addGroup(jd_chatLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jLabel23)
                            .addComponent(tf_mensaje, javax.swing.GroupLayout.PREFERRED_SIZE, 345, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(bt_enviarMensaje, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                .addContainerGap())
        );
        jd_chatLayout.setVerticalGroup(
            jd_chatLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jd_chatLayout.createSequentialGroup()
                .addGap(18, 18, 18)
                .addComponent(jLabel23)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jd_chatLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(tf_mensaje, javax.swing.GroupLayout.PREFERRED_SIZE, 39, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(bt_enviarMensaje, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jd_chatLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(jd_chatLayout.createSequentialGroup()
                        .addComponent(cb_usuarios, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jd_chatLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(bt_agregarUsuario)
                            .addComponent(bt_eliminarUsuario))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jScrollPane8, javax.swing.GroupLayout.PREFERRED_SIZE, 184, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(jScrollPane7))
                .addContainerGap())
        );

        jd_programarTarea.setResizable(false);

        jLabel24.setText("Asunto:");

        jLabel25.setText("Inicio:");

        jdc_inicio.setDate(new java.util.Date());
        jdc_inicio.setDateFormatString("dd/MM/yyyy");

        jLabel26.setText("Vencimiento:");

        jdc_final.setDate(new java.util.Date());
        jdc_final.setDateFormatString("dd/MM/yyyy");

        cb_estado.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "No comenzado", "Comenzado", "Terminado" }));
        cb_estado.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cb_estadoActionPerformed(evt);
            }
        });

        jLabel27.setText("Estado:");

        jLabel28.setText("Prioridad:");

        cb_prioridad.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Baja", "Media", "Alta" }));

        ta_descripTarea.setColumns(20);
        ta_descripTarea.setRows(5);
        jScrollPane10.setViewportView(ta_descripTarea);

        jLabel33.setText("Aviso:");

        sp_horas.setModel(new javax.swing.SpinnerNumberModel(8, 0, 23, 1));

        jLabel34.setText("H");

        sp_minutos.setModel(new javax.swing.SpinnerNumberModel(0, 0, 59, 1));

        jLabel35.setText("m");

        jLabel36.setText("Propietario:");

        chb_lunes.setText("Lunes");

        chb_martes.setText("Martes");

        chb_miercoles.setText("Miércoles");

        chb_jueves.setText("Jueves");

        chb_viernes.setText("Viernes");

        chb_sabado.setText("Sábado");
        chb_sabado.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                chb_sabadoActionPerformed(evt);
            }
        });

        chb_domingo.setText("Domingo");

        chb_semanal.setText("Repetir Semanalmente");

        jLabel37.setText("Intervalo de repetición:");

        bg_finalTarea.add(rb_sinFecha);
        rb_sinFecha.setSelected(true);
        rb_sinFecha.setText("Sin fecha de finalización");

        bg_finalTarea.add(rb_despuesDeFecha);
        rb_despuesDeFecha.setText("Finalizar");

        bg_finalTarea.add(rb_despuesDeRep);
        rb_despuesDeRep.setText("Finalizar después de ");

        jLabel38.setText("repeticiones");

        sp_repeticiones.setModel(new javax.swing.SpinnerNumberModel(1, 1, null, 1));

        bt_guardarTarea.setText("Aceptar");
        bt_guardarTarea.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_guardarTareaActionPerformed(evt);
            }
        });

        bt_cancelarTarea.setText("Cancelar");
        bt_cancelarTarea.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_cancelarTareaActionPerformed(evt);
            }
        });

        jdc_finalRep.setDate(new java.util.Date());
        jdc_finalRep.setDateFormatString("dd/MM/yyyy");

        javax.swing.GroupLayout jd_programarTareaLayout = new javax.swing.GroupLayout(jd_programarTarea.getContentPane());
        jd_programarTarea.getContentPane().setLayout(jd_programarTareaLayout);
        jd_programarTareaLayout.setHorizontalGroup(
            jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jd_programarTareaLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jSeparator4)
                    .addComponent(jSeparator10, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(jd_programarTareaLayout.createSequentialGroup()
                        .addGap(424, 424, 424)
                        .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(chb_jueves)
                            .addComponent(chb_domingo))
                        .addGap(18, 18, 18)
                        .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jd_programarTareaLayout.createSequentialGroup()
                                .addComponent(chb_viernes)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(chb_sabado))
                            .addGroup(jd_programarTareaLayout.createSequentialGroup()
                                .addComponent(chb_lunes)
                                .addGap(18, 18, 18)
                                .addComponent(chb_martes)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(chb_miercoles))))
                    .addGroup(jd_programarTareaLayout.createSequentialGroup()
                        .addGap(451, 451, 451)
                        .addComponent(chb_semanal))
                    .addGroup(jd_programarTareaLayout.createSequentialGroup()
                        .addComponent(jScrollPane10, javax.swing.GroupLayout.PREFERRED_SIZE, 394, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel37)
                            .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                .addComponent(bt_guardarTarea, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(bt_cancelarTarea, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jd_programarTareaLayout.createSequentialGroup()
                                .addComponent(rb_despuesDeRep)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(sp_repeticiones))
                            .addGroup(jd_programarTareaLayout.createSequentialGroup()
                                .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(rb_sinFecha)
                                    .addGroup(jd_programarTareaLayout.createSequentialGroup()
                                        .addGap(21, 21, 21)
                                        .addComponent(jLabel38)))
                                .addGap(0, 0, Short.MAX_VALUE))
                            .addGroup(jd_programarTareaLayout.createSequentialGroup()
                                .addComponent(rb_despuesDeFecha)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jdc_finalRep, javax.swing.GroupLayout.DEFAULT_SIZE, 143, Short.MAX_VALUE))))
                    .addGroup(jd_programarTareaLayout.createSequentialGroup()
                        .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel25)
                            .addComponent(jLabel26))
                        .addGap(42, 42, 42)
                        .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jd_programarTareaLayout.createSequentialGroup()
                                .addComponent(jdc_final, javax.swing.GroupLayout.PREFERRED_SIZE, 216, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(jLabel28))
                            .addGroup(jd_programarTareaLayout.createSequentialGroup()
                                .addComponent(jdc_inicio, javax.swing.GroupLayout.PREFERRED_SIZE, 216, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(jLabel27)))
                        .addGap(18, 18, 18)
                        .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(cb_estado, 0, 358, Short.MAX_VALUE)
                            .addComponent(cb_prioridad, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                    .addGroup(jd_programarTareaLayout.createSequentialGroup()
                        .addComponent(jLabel24)
                        .addGap(75, 75, 75)
                        .addComponent(tf_asuntoTarea, javax.swing.GroupLayout.PREFERRED_SIZE, 655, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jd_programarTareaLayout.createSequentialGroup()
                        .addComponent(jLabel33, javax.swing.GroupLayout.PREFERRED_SIZE, 51, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(sp_horas, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel34)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(sp_minutos, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel35)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jLabel36)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(label_propietario, javax.swing.GroupLayout.PREFERRED_SIZE, 36, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap())
        );
        jd_programarTareaLayout.setVerticalGroup(
            jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jd_programarTareaLayout.createSequentialGroup()
                .addGap(12, 12, 12)
                .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(tf_asuntoTarea, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel24))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jSeparator4, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel25)
                    .addComponent(jdc_inicio, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(cb_estado, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jLabel27)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel26)
                    .addComponent(jdc_final, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(jLabel28)
                        .addComponent(cb_prioridad, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jSeparator10, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(label_propietario, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(sp_horas, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jLabel34)
                        .addComponent(sp_minutos, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jLabel35)
                        .addComponent(jLabel36)
                        .addComponent(jLabel33)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jScrollPane10, javax.swing.GroupLayout.PREFERRED_SIZE, 210, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jd_programarTareaLayout.createSequentialGroup()
                        .addComponent(chb_semanal)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(chb_domingo)
                            .addComponent(chb_lunes)
                            .addComponent(chb_martes)
                            .addComponent(chb_miercoles))
                        .addGap(18, 18, 18)
                        .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(chb_sabado)
                            .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                .addComponent(chb_viernes)
                                .addComponent(chb_jueves)))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel37)
                            .addComponent(rb_sinFecha))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jd_programarTareaLayout.createSequentialGroup()
                                .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(rb_despuesDeFecha)
                                    .addComponent(bt_guardarTarea))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(jd_programarTareaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(rb_despuesDeRep)
                                    .addComponent(sp_repeticiones, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(bt_cancelarTarea))
                                .addGap(0, 0, 0)
                                .addComponent(jLabel38))
                            .addComponent(jdc_finalRep, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addContainerGap())
        );

        jd_nuevoGrupo.setTitle("Nuevo Grupo");

        jLabel20.setFont(new java.awt.Font("Dialog", 1, 18)); // NOI18N
        jLabel20.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel20.setText("Nuevo Grupo de Contactos");

        jLabel22.setText("¿Cómo desea que se llame el nuevo grupo?");

        bt_crearGrupo.setText("Crear Grupo");
        bt_crearGrupo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_crearGrupoActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jd_nuevoGrupoLayout = new javax.swing.GroupLayout(jd_nuevoGrupo.getContentPane());
        jd_nuevoGrupo.getContentPane().setLayout(jd_nuevoGrupoLayout);
        jd_nuevoGrupoLayout.setHorizontalGroup(
            jd_nuevoGrupoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jd_nuevoGrupoLayout.createSequentialGroup()
                .addGap(76, 76, 76)
                .addGroup(jd_nuevoGrupoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.CENTER)
                    .addComponent(bt_crearGrupo)
                    .addComponent(tf_nombreGrupo)
                    .addComponent(jLabel22, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jLabel20))
                .addContainerGap(78, Short.MAX_VALUE))
        );
        jd_nuevoGrupoLayout.setVerticalGroup(
            jd_nuevoGrupoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jd_nuevoGrupoLayout.createSequentialGroup()
                .addGap(15, 15, 15)
                .addComponent(jLabel20)
                .addGap(18, 18, 18)
                .addComponent(jLabel22)
                .addGap(18, 18, 18)
                .addComponent(tf_nombreGrupo, javax.swing.GroupLayout.PREFERRED_SIZE, 40, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(bt_crearGrupo)
                .addContainerGap(7, Short.MAX_VALUE))
        );

        jd_abrirGrupos.setTitle("Borradores");

        jPanel7.setBackground(new java.awt.Color(255, 255, 153));

        lista_grupos.setModel(new DefaultListModel());
        jScrollPane9.setViewportView(lista_grupos);

        jLabel30.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jLabel30.setForeground(new java.awt.Color(255, 0, 0));
        jLabel30.setText("Grupos de Contactos");

        bt_agregarFinal.setBackground(new java.awt.Color(255, 0, 51));
        bt_agregarFinal.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        bt_agregarFinal.setForeground(new java.awt.Color(255, 255, 0));
        bt_agregarFinal.setText("Agregar al Grupo");
        bt_agregarFinal.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));
        bt_agregarFinal.setBorderPainted(false);
        bt_agregarFinal.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_agregarFinalActionPerformed(evt);
            }
        });

        bt_enviarCorreoGrupal.setBackground(new java.awt.Color(255, 0, 51));
        bt_enviarCorreoGrupal.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        bt_enviarCorreoGrupal.setForeground(new java.awt.Color(255, 255, 0));
        bt_enviarCorreoGrupal.setText("Enviar Mensaje");
        bt_enviarCorreoGrupal.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));
        bt_enviarCorreoGrupal.setBorderPainted(false);
        bt_enviarCorreoGrupal.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_enviarCorreoGrupalActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel7Layout = new javax.swing.GroupLayout(jPanel7);
        jPanel7.setLayout(jPanel7Layout);
        jPanel7Layout.setHorizontalGroup(
            jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel7Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel7Layout.createSequentialGroup()
                        .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.CENTER)
                            .addComponent(jScrollPane9, javax.swing.GroupLayout.PREFERRED_SIZE, 243, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel30))
                        .addGap(0, 8, Short.MAX_VALUE))
                    .addGroup(jPanel7Layout.createSequentialGroup()
                        .addComponent(bt_agregarFinal)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(bt_enviarCorreoGrupal)))
                .addContainerGap())
        );
        jPanel7Layout.setVerticalGroup(
            jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel7Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel30)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane9, javax.swing.GroupLayout.PREFERRED_SIZE, 246, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(bt_agregarFinal)
                    .addComponent(bt_enviarCorreoGrupal))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout jd_abrirGruposLayout = new javax.swing.GroupLayout(jd_abrirGrupos.getContentPane());
        jd_abrirGrupos.getContentPane().setLayout(jd_abrirGruposLayout);
        jd_abrirGruposLayout.setHorizontalGroup(
            jd_abrirGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );
        jd_abrirGruposLayout.setVerticalGroup(
            jd_abrirGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );

        jmi_eliminarDef.setText("Eliminar definitivamente");
        jmi_eliminarDef.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jmi_eliminarDefActionPerformed(evt);
            }
        });
        pm_eliminar.add(jmi_eliminarDef);

        jLabel32.setFont(new java.awt.Font("Dialog", 1, 24)); // NOI18N
        jLabel32.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel32.setText("Filtrar Correos");

        list_filtros.setModel(new DefaultListModel());
        list_filtros.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                list_filtrosKeyPressed(evt);
            }
        });
        jScrollPane11.setViewportView(list_filtros);

        sp_horasInicio.setModel(new javax.swing.SpinnerNumberModel(8, 0, 23, 1));

        jLabel39.setText("H");

        sp_minutosInicio.setModel(new javax.swing.SpinnerNumberModel(0, 0, 59, 1));

        jLabel40.setText("m");

        jLabel41.setText("Enviados entre...");

        sp_horasFinal.setModel(new javax.swing.SpinnerNumberModel(8, 0, 23, 1));

        jLabel42.setText("H");

        sp_minutosFinal.setModel(new javax.swing.SpinnerNumberModel(0, 0, 59, 1));

        jLabel43.setText("m");

        jLabel44.setText("y...");

        bt_crearFiltroHora.setText("Crear Filtro");
        bt_crearFiltroHora.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_crearFiltroHoraActionPerformed(evt);
            }
        });

        bt_crearFiltroCuenta.setText("Crear Filtro");
        bt_crearFiltroCuenta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_crearFiltroCuentaActionPerformed(evt);
            }
        });

        tf_asuntoFiltrado.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                tf_asuntoFiltradoActionPerformed(evt);
            }
        });

        bt_crearFiltroAsunto.setText("Crear Filtro");
        bt_crearFiltroAsunto.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_crearFiltroAsuntoActionPerformed(evt);
            }
        });

        jLabel45.setText("De la cuenta...");

        jLabel46.setText("Con asunto que contenga...");

        javax.swing.GroupLayout jd_filtrosLayout = new javax.swing.GroupLayout(jd_filtros.getContentPane());
        jd_filtros.getContentPane().setLayout(jd_filtrosLayout);
        jd_filtrosLayout.setHorizontalGroup(
            jd_filtrosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jd_filtrosLayout.createSequentialGroup()
                .addGap(21, 21, 21)
                .addGroup(jd_filtrosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jd_filtrosLayout.createSequentialGroup()
                        .addComponent(jLabel32, javax.swing.GroupLayout.PREFERRED_SIZE, 193, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(113, 113, 113))
                    .addGroup(jd_filtrosLayout.createSequentialGroup()
                        .addGroup(jd_filtrosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel46)
                            .addGroup(jd_filtrosLayout.createSequentialGroup()
                                .addGroup(jd_filtrosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel41)
                                    .addGroup(jd_filtrosLayout.createSequentialGroup()
                                        .addGroup(jd_filtrosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                            .addComponent(jLabel45)
                                            .addComponent(sp_horasInicio, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(jLabel39)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(sp_minutosInicio, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(jLabel40)))
                                .addGap(18, 18, 18)
                                .addGroup(jd_filtrosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel44)
                                    .addGroup(jd_filtrosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                        .addComponent(bt_crearFiltroCuenta, javax.swing.GroupLayout.PREFERRED_SIZE, 105, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addGroup(jd_filtrosLayout.createSequentialGroup()
                                            .addComponent(sp_horasFinal, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                            .addComponent(jLabel42)
                                            .addGroup(jd_filtrosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(jd_filtrosLayout.createSequentialGroup()
                                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                    .addComponent(sp_minutosFinal, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                    .addComponent(jLabel43))
                                                .addGroup(jd_filtrosLayout.createSequentialGroup()
                                                    .addGap(36, 36, 36)
                                                    .addComponent(bt_crearFiltroHora, javax.swing.GroupLayout.PREFERRED_SIZE, 105, javax.swing.GroupLayout.PREFERRED_SIZE))))
                                        .addComponent(bt_crearFiltroAsunto, javax.swing.GroupLayout.PREFERRED_SIZE, 105, javax.swing.GroupLayout.PREFERRED_SIZE))))
                            .addGroup(jd_filtrosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                .addComponent(tf_asuntoFiltrado, javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(cb_filtrados, javax.swing.GroupLayout.Alignment.LEADING, 0, 211, Short.MAX_VALUE))
                            .addComponent(jScrollPane11, javax.swing.GroupLayout.PREFERRED_SIZE, 375, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
        );
        jd_filtrosLayout.setVerticalGroup(
            jd_filtrosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jd_filtrosLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel32)
                .addGap(11, 11, 11)
                .addGroup(jd_filtrosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel44, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel41, javax.swing.GroupLayout.Alignment.TRAILING))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jd_filtrosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.CENTER)
                    .addComponent(sp_minutosInicio, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(sp_horasInicio, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel39)
                    .addComponent(jLabel40)
                    .addComponent(sp_horasFinal, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel42)
                    .addComponent(sp_minutosFinal, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel43))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(bt_crearFiltroHora)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jLabel45)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(cb_filtrados, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(4, 4, 4)
                .addComponent(bt_crearFiltroCuenta)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jLabel46)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(tf_asuntoFiltrado, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(9, 9, 9)
                .addComponent(bt_crearFiltroAsunto)
                .addGap(18, 18, 18)
                .addComponent(jScrollPane11, javax.swing.GroupLayout.PREFERRED_SIZE, 160, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(22, 22, 22))
        );

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Minigmail");
        setMinimumSize(new java.awt.Dimension(100, 10));
        setSize(new java.awt.Dimension(900, 600));
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowDeiconified(java.awt.event.WindowEvent evt) {
                formWindowDeiconified(evt);
            }
        });

        panel.setBackground(new java.awt.Color(51, 255, 102));

        barra_herramientas.setBackground(new java.awt.Color(0, 0, 0));
        barra_herramientas.setRollover(true);

        bt_mensajeNuevo.setBackground(new java.awt.Color(255, 255, 255));
        bt_mensajeNuevo.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        bt_mensajeNuevo.setText("Mensaje Nuevo");
        bt_mensajeNuevo.setFocusable(false);
        bt_mensajeNuevo.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        bt_mensajeNuevo.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        bt_mensajeNuevo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_mensajeNuevoActionPerformed(evt);
            }
        });
        barra_herramientas.add(bt_mensajeNuevo);
        barra_herramientas.add(jSeparator3);

        bt_chatear.setBackground(new java.awt.Color(255, 255, 255));
        bt_chatear.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        bt_chatear.setText("Chatear");
        bt_chatear.setFocusable(false);
        bt_chatear.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        bt_chatear.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        bt_chatear.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_chatearActionPerformed(evt);
            }
        });
        barra_herramientas.add(bt_chatear);
        barra_herramientas.add(jSeparator8);

        bt_verGrupos.setBackground(new java.awt.Color(255, 255, 255));
        bt_verGrupos.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        bt_verGrupos.setText("Grupos de contacto");
        bt_verGrupos.setFocusable(false);
        bt_verGrupos.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        bt_verGrupos.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        bt_verGrupos.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_verGruposActionPerformed(evt);
            }
        });
        barra_herramientas.add(bt_verGrupos);
        barra_herramientas.add(jSeparator9);

        bt_programarTarea.setBackground(new java.awt.Color(255, 255, 255));
        bt_programarTarea.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        bt_programarTarea.setText("Programar Tarea");
        bt_programarTarea.setFocusable(false);
        bt_programarTarea.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        bt_programarTarea.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        bt_programarTarea.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_programarTareaActionPerformed(evt);
            }
        });
        barra_herramientas.add(bt_programarTarea);
        barra_herramientas.add(jSeparator11);

        bt_programarTarea1.setBackground(new java.awt.Color(255, 255, 255));
        bt_programarTarea1.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        bt_programarTarea1.setText("Aplicar Filtros");
        bt_programarTarea1.setFocusable(false);
        bt_programarTarea1.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        bt_programarTarea1.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        bt_programarTarea1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_programarTarea1ActionPerformed(evt);
            }
        });
        barra_herramientas.add(bt_programarTarea1);

        tp_mostrarCorreo.setEditable(false);
        jScrollPane2.setViewportView(tp_mostrarCorreo);

        label_personalizar.setBackground(new java.awt.Color(255, 255, 255));
        label_personalizar.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        label_personalizar.setText("Personalizar");
        label_personalizar.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(255, 255, 255), 2, true));
        label_personalizar.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                label_personalizarMouseClicked(evt);
            }
        });

        javax.swing.tree.DefaultMutableTreeNode treeNode1 = new javax.swing.tree.DefaultMutableTreeNode("Correos");
        jt_bandejas.setModel(new javax.swing.tree.DefaultTreeModel(treeNode1));
        jt_bandejas.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jt_bandejasMouseClicked(evt);
            }
        });
        jScrollPane6.setViewportView(jt_bandejas);

        tf_mostrarAsunto.setEditable(false);

        label_emisor.setBackground(new java.awt.Color(0, 0, 0));
        label_emisor.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        label_emisor.setForeground(new java.awt.Color(255, 255, 255));
        label_emisor.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);

        label_receptor.setBackground(new java.awt.Color(0, 0, 0));
        label_receptor.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        label_receptor.setForeground(new java.awt.Color(255, 255, 255));
        label_receptor.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);

        label_fechaEnvio.setBackground(new java.awt.Color(0, 0, 0));
        label_fechaEnvio.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        label_fechaEnvio.setForeground(new java.awt.Color(255, 255, 255));
        label_fechaEnvio.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);

        chb_leido.setBackground(new java.awt.Color(0, 0, 0));
        chb_leido.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        chb_leido.setForeground(new java.awt.Color(255, 255, 255));
        chb_leido.setText("Leído");
        chb_leido.setEnabled(false);

        bt_limpiar.setBackground(new java.awt.Color(255, 0, 0));
        bt_limpiar.setFont(new java.awt.Font("Tahoma", 0, 10)); // NOI18N
        bt_limpiar.setForeground(new java.awt.Color(255, 255, 255));
        bt_limpiar.setText("x");
        bt_limpiar.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));
        bt_limpiar.setBorderPainted(false);
        bt_limpiar.setEnabled(false);
        bt_limpiar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bt_limpiarActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout panelLayout = new javax.swing.GroupLayout(panel);
        panel.setLayout(panelLayout);
        panelLayout.setHorizontalGroup(
            panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jScrollPane6, javax.swing.GroupLayout.PREFERRED_SIZE, 388, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addGroup(panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane2)
                    .addComponent(tf_mostrarAsunto)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, panelLayout.createSequentialGroup()
                        .addGap(41, 41, 41)
                        .addComponent(label_fechaEnvio, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addComponent(label_personalizar, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(chb_leido, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, panelLayout.createSequentialGroup()
                        .addComponent(bt_limpiar, javax.swing.GroupLayout.PREFERRED_SIZE, 37, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGroup(panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(label_emisor, javax.swing.GroupLayout.PREFERRED_SIZE, 400, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(label_receptor, javax.swing.GroupLayout.PREFERRED_SIZE, 400, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addGap(20, 20, 20))
            .addComponent(barra_herramientas, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        panelLayout.setVerticalGroup(
            panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelLayout.createSequentialGroup()
                .addComponent(barra_herramientas, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jScrollPane6, javax.swing.GroupLayout.PREFERRED_SIZE, 518, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(panelLayout.createSequentialGroup()
                        .addComponent(tf_mostrarAsunto, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(panelLayout.createSequentialGroup()
                                .addComponent(label_emisor, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(label_receptor, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(bt_limpiar, javax.swing.GroupLayout.PREFERRED_SIZE, 32, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(5, 5, 5)
                        .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 403, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(label_fechaEnvio, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(chb_leido))))
                .addGap(13, 13, 13)
                .addComponent(label_personalizar)
                .addGap(14, 14, 14))
        );

        menu_bar.setBorderPainted(false);

        jm_opciones.setText("Opciones");

        jmi_signIn.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_S, java.awt.event.InputEvent.CTRL_MASK));
        jmi_signIn.setText("Sign In");
        jmi_signIn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jmi_signInActionPerformed(evt);
            }
        });
        jm_opciones.add(jmi_signIn);

        jmi_logOut.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_O, java.awt.event.InputEvent.CTRL_MASK));
        jmi_logOut.setText("Log out");
        jmi_logOut.setEnabled(false);
        jmi_logOut.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jmi_logOutActionPerformed(evt);
            }
        });
        jm_opciones.add(jmi_logOut);

        jmi_cuenta.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_C, java.awt.event.InputEvent.SHIFT_MASK));
        jmi_cuenta.setText("Mi cuenta");
        jmi_cuenta.setEnabled(false);
        jmi_cuenta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jmi_cuentaActionPerformed(evt);
            }
        });
        jm_opciones.add(jmi_cuenta);

        jmi_dirCuentas.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_D, java.awt.event.InputEvent.CTRL_MASK));
        jmi_dirCuentas.setText("Directorio de cuentas");
        jmi_dirCuentas.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jmi_dirCuentasActionPerformed(evt);
            }
        });
        jm_opciones.add(jmi_dirCuentas);

        menu_bar.add(jm_opciones);

        jm_ayuda.setText("Ayuda");
        menu_bar.add(jm_ayuda);

        setJMenuBar(menu_bar);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(0, 0, 0)
                .addComponent(panel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addGap(0, 0, 0)
                .addComponent(panel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void formWindowDeiconified(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_formWindowDeiconified
        if (jd_ingreso.isVisible()) {
            this.setExtendedState(ICONIFIED);
        }
    }//GEN-LAST:event_formWindowDeiconified

    private void bt_loginActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_loginActionPerformed
        if (cb_ingreso_cuentas.getSelectedIndex() >= 0) {

            try {

                String pass = ((Cuenta) cb_ingreso_cuentas.getSelectedItem()).getClave();
                if (pf_ingreso_clave.getText().equals(pass)) {

                    JOptionPane.showMessageDialog(jd_ingreso, "Ingreso exitoso.", "Ingresado", JOptionPane.INFORMATION_MESSAGE);
                    cuentaActual = (Cuenta) cb_ingreso_cuentas.getSelectedItem();
                    ingresar();

                } else {
                    JOptionPane.showMessageDialog(jd_ingreso, "La contraseña ingresada es incorrecta.", "No ingresado", JOptionPane.ERROR_MESSAGE);
                }
            } catch (NullPointerException e) {
                JOptionPane.showMessageDialog(this, "Debe ingresar una contraseña.", "Contraseña no ingresada", JOptionPane.ERROR_MESSAGE);
                e.printStackTrace();
            }

        }
    }//GEN-LAST:event_bt_loginActionPerformed

    private void jd_ingresoFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jd_ingresoFocusLost

    }//GEN-LAST:event_jd_ingresoFocusLost

    private void bt_showCrearActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_showCrearActionPerformed

        jd_crearCuenta.setLocationRelativeTo(jd_ingreso);
        jd_crearCuenta.setVisible(true);

        jd_ingreso.setModal(false);
        jd_ingreso.setVisible(false);

        jd_crearCuenta.setModal(true);
    }//GEN-LAST:event_bt_showCrearActionPerformed

    private void bt_crearCuentaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_crearCuentaActionPerformed

        Dba db = new Dba("./Base2.accdb");
        db.conectar();
        try {

            String direccion = tf_direccion.getText().trim() + "@minigmail.edu";
            String nombre = tf_nombre.getText().trim();
            String apellido = tf_apellido.getText().trim();
            Date fecha = new Date();
            SimpleDateFormat f = new SimpleDateFormat("MM/dd/yyyy");
            String fechaDeCreacion = f.format(fecha);

            if (pf_clave.getText().equals(pf_confirmacion.getText())) {
                String clave = pf_clave.getText();

                if (verificarDireccion(direccion)) {

                    try {
                        db.query.executeUpdate(
                                "INSERT INTO Cuentas "
                                + " (DireccionCorreo,Nombre,Apellido,Clave,FechaCreacion)"
                                + " VALUES ('" + direccion + "','" + nombre + "','" + apellido + "','" + clave + "','" + fechaDeCreacion + "')");

                        db.commit();

                        jd_crearCuenta.setVisible(false);

                        tf_nombre.setText("");
                        tf_apellido.setText("");
                        tf_direccion.setText("");
                        pf_clave.setText("");
                        pf_confirmacion.setText("");

                        Cuenta c = new Cuenta(direccion, nombre, apellido, clave, fecha);
                        cuentaActual = c;

                        DefaultComboBoxModel model = (DefaultComboBoxModel) cb_ingreso_cuentas.getModel();
                        model.addElement(c);
                        cb_ingreso_cuentas.setModel(model);

                        ingresar();

                        File dir = new File("./Correos/" + c + "/Grupos");
                        if (!dir.exists()) {
                            if (!dir.mkdirs()) {
                                JOptionPane.showMessageDialog(this, "Error carpetas correos.");
                            }
                        }

                    } catch (HeadlessException | SQLException e) {
                        e.printStackTrace();
                    }
                } else {
                    JOptionPane.showMessageDialog(jd_crearCuenta, "La clave no fue confirmada correctamente.", "Error de confirmación.", 0);
                    tf_direccion.setText("");
                }

            } else {
                JOptionPane.showMessageDialog(jd_crearCuenta, "La clave no fue confirmada correctamente.", "Error de confirmación.", 0);
                pf_clave.setText("");
                pf_confirmacion.setText("");
            }

        } catch (Exception e) {
            e.printStackTrace();
        }
        db.desconectar();

    }//GEN-LAST:event_bt_crearCuentaActionPerformed

    private void cb_fontItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_cb_fontItemStateChanged
        // TODO add your handling code here:
        StyleConstants.setFontFamily(estilo, cb_font.getSelectedItem().toString());
        //StyleConstants.setFontSize(estilo, Integer.parseInt(cb_tamaño.getSelectedItem().toString()));
        doc.setCharacterAttributes(tp_texto.getSelectionStart(),
                tp_texto.getSelectionEnd() - tp_texto.getSelectionStart(),
                tp_texto.getStyle(miEstilo),
                true);
    }//GEN-LAST:event_cb_fontItemStateChanged

    private void cb_tamañoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cb_tamañoActionPerformed
        // TODO add your handling code here:
        StyleConstants.setFontSize(estilo, Integer.parseInt(cb_tamaño.getSelectedItem().toString()));
        doc.setCharacterAttributes(tp_texto.getSelectionStart(),
                tp_texto.getSelectionEnd() - tp_texto.getSelectionStart(),
                tp_texto.getStyle(miEstilo),
                true);
    }//GEN-LAST:event_cb_tamañoActionPerformed

    private void bt_negritaMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_bt_negritaMouseClicked
        // TODO add your handling code here:
        try {
            StyleConstants.setBold(estilo, true);

            doc.setCharacterAttributes(tp_texto.getSelectionStart(),
                    tp_texto.getSelectionEnd() - tp_texto.getSelectionStart(),
                    tp_texto.getStyle(miEstilo),
                    true);
        } catch (Exception ex) {
        }
    }//GEN-LAST:event_bt_negritaMouseClicked

    private void bt_cursivaMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_bt_cursivaMouseClicked
        // TODO add your handling code here:
        try {
            StyleConstants.setItalic(estilo, true);

            doc.setCharacterAttributes(tp_texto.getSelectionStart(),
                    tp_texto.getSelectionEnd() - tp_texto.getSelectionStart(),
                    tp_texto.getStyle(miEstilo),
                    true);
        } catch (Exception ex) {
        }
    }//GEN-LAST:event_bt_cursivaMouseClicked

    private void bt_subrayadoMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_bt_subrayadoMouseClicked
        // TODO add your handling code here:
        try {
            StyleConstants.setUnderline(estilo, true);

            doc.setCharacterAttributes(tp_texto.getSelectionStart(),
                    tp_texto.getSelectionEnd() - tp_texto.getSelectionStart(),
                    tp_texto.getStyle(miEstilo),
                    true);
        } catch (Exception ex) {
        }
    }//GEN-LAST:event_bt_subrayadoMouseClicked

    private void bt_resaltadoMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_bt_resaltadoMouseClicked
        // TODO add your handling code here:
        try {

            StyleConstants.setBackground(estilo,
                    JColorChooser.showDialog(jd_enviarCorreo,
                            "Seleccione Color", Color.yellow)
            );

            doc.setCharacterAttributes(tp_texto.getSelectionStart(),
                    tp_texto.getSelectionEnd() - tp_texto.getSelectionStart(),
                    tp_texto.getStyle(miEstilo),
                    true);
        } catch (Exception ex) {
        }
    }//GEN-LAST:event_bt_resaltadoMouseClicked

    private void bt_colorLetraMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_bt_colorLetraMouseClicked
        // TODO add your handling code here:
        try {

            StyleConstants.setForeground(estilo,
                    JColorChooser.showDialog(jd_enviarCorreo,
                            "Seleccione Color", Color.red)
            );

            doc.setCharacterAttributes(tp_texto.getSelectionStart(),
                    tp_texto.getSelectionEnd() - tp_texto.getSelectionStart(),
                    tp_texto.getStyle(miEstilo),
                    true);
        } catch (Exception ex) {
        }
    }//GEN-LAST:event_bt_colorLetraMouseClicked

    private void bt_agregarDestinatarioActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_agregarDestinatarioActionPerformed
        if (cb_destinatarios.getSelectedIndex() >= 0) {

            DefaultListModel model = (DefaultListModel) list_destinatarios.getModel();
            if (!model.contains((Cuenta) cb_destinatarios.getSelectedItem())) {
                model.addElement((Cuenta) cb_destinatarios.getSelectedItem());
                cuentasDestinatarios.add((Cuenta) cb_destinatarios.getSelectedItem());
            }
            list_destinatarios.setModel(model);

        } else {
            JOptionPane.showMessageDialog(jd_enviarCorreo, "Sleccione una cuenta.", "Sin selección.", JOptionPane.ERROR_MESSAGE);
        }
    }//GEN-LAST:event_bt_agregarDestinatarioActionPerformed

    private void bt_eliminarDestinatarioActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_eliminarDestinatarioActionPerformed
        if (list_destinatarios.getSelectedIndex() >= 0) {

            DefaultListModel model = (DefaultListModel) list_destinatarios.getModel();
            int[] arr = list_destinatarios.getSelectedIndices();

            for (int i = arr.length - 1; i >= 0; i--) {
                try {
                    model.removeElementAt(i);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
            list_destinatarios.setModel(model);
        }
    }//GEN-LAST:event_bt_eliminarDestinatarioActionPerformed

    private void bt_enviarCorreoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_enviarCorreoActionPerformed

        DefaultListModel lmodel = (DefaultListModel) list_destinatarios.getModel();

        if (!lmodel.isEmpty()) {
            try {

                Documento d = new Documento(tp_texto, doc, estilo, tp_texto.getText());

                Correo correo = new Correo(cuentaActual, (Cuenta) lmodel.get(0), tf_asunto.getText(), d, new Date(), false);

                //cuentaActual.cargarCorreos();
                cuentaActual.getEnviados().add(correo);
                cuentaActual.escribirCorreos();

                for (Cuenta c : cuentasDestinatarios) {
                    if (!c.equals(cuentaActual)) {
                        try {
                            c.cargarFiltros();
                            c.cargarCorreos();
                            c.setRecibido(correo);
                            c.escribirCorreos();
                        } catch (Exception e) {
                            System.out.println(e.getMessage());
                        }
                    } else {
                        cuentaActual.setRecibido(correo);
                        cuentaActual.escribirCorreos();
                    }
                }

                cargarArbol();

                JOptionPane.showMessageDialog(jd_enviarCorreo,
                        "Correo enviado exitosamente");

                jd_enviarCorreo.setVisible(false);
                tp_texto.setText("");
                tf_asunto.setText("");
                cb_destinatarios.setSelectedIndex(-1);
                lmodel.removeAllElements();

                if (correoSeleccionado != null) {
                    //cuentaActual.getBorradores()
                    correoSeleccionado = null;
                }

                miEstilo = "miEstilo" + (contador++);
                estilo = tp_texto.addStyle(miEstilo, null);

            } catch (Exception e) {
                e.printStackTrace();
            }

        }//fin if

    }//GEN-LAST:event_bt_enviarCorreoActionPerformed

    private void bt_guardarBorradorActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_guardarBorradorActionPerformed

        try {

            Documento d = new Documento(tp_texto, doc, estilo, tp_texto.getText());

            DefaultListModel lmodel = (DefaultListModel) list_destinatarios.getModel();

            if (correoSeleccionado != null) {
                if (!lmodel.isEmpty()) {
                    correoSeleccionado.setReceptorPrincipal((Cuenta) lmodel.get(0));
                }
                correoSeleccionado.setAsunto(tf_asunto.getText());
                correoSeleccionado.setCuerpo(d);
                correoSeleccionado.setFechaEnvio(new Date());

                correoSeleccionado = null;
                JOptionPane.showMessageDialog(jd_enviarCorreo,
                        "Cambios guardados");
            } else {

                Correo correo = new Correo();
                correo.setEmisor(cuentaActual);
                if (!lmodel.isEmpty()) {
                    correo.setReceptorPrincipal((Cuenta) lmodel.get(0));
                }
                correo.setAsunto(tf_asunto.getText());
                correo.setCuerpo(d);
                correo.setFechaEnvio(new Date());
                correo.setLeido(false);

                cuentaActual.getBorradores().add(correo);
                JOptionPane.showMessageDialog(jd_enviarCorreo,
                        "Borrador guardado exitosamente");
            }
            cuentaActual.escribirCorreos();

            cargarArbol();

            miEstilo = "miEstilo" + (contador++);
            estilo = tp_texto.addStyle(miEstilo, null);

            jd_enviarCorreo.setVisible(false);
            tp_texto.setText("");
            tf_asunto.setText("");
            cb_destinatarios.setSelectedIndex(-1);
            lmodel.removeAllElements();

        } catch (Exception e) {
            e.printStackTrace();
        }

    }//GEN-LAST:event_bt_guardarBorradorActionPerformed

    private void bt_cargarBorradorActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_cargarBorradorActionPerformed

        if (lista_borradores.getSelectedIndex() >= 0) {
            DefaultListModel lmodel = (DefaultListModel) lista_borradores.getModel();
//            Correo borrador = //borradores.get(lista_borradores.getSelectedIndex());//
//                    (Correo) lmodel.get(lista_borradores.getSelectedIndex());

            correoSeleccionado = (Correo) lmodel.get(lista_borradores.getSelectedIndex());

            try {
                //tp_texto.setText("");
                Documento temp = correoSeleccionado.getCuerpo();
                System.out.println(temp.getPanel().getText());
                //tp_texto = correoSeleccionado.getCuerpo().getPanel();
                tp_texto.setText(temp.getTexto());
                tp_texto.setStyledDocument(temp.getDoc());
                tp_texto.setText(temp.getTexto());

                tf_asunto.setText(correoSeleccionado.getAsunto());

                try {
                    DefaultListModel l = (DefaultListModel) list_destinatarios.getModel();
                    l.removeAllElements();
                    l.addElement((Cuenta) correoSeleccionado.getReceptorPrincipal());
                    cuentasDestinatarios.add((Cuenta) correoSeleccionado.getReceptorPrincipal());
                    list_destinatarios.setModel(l);
                } catch (Exception e) {
                }

                jd_abrirBorrador.setVisible(false);

                miEstilo = temp.getEstilo().getName() + contador;
                estilo
                        = //temp.getEstilo();//
                        tp_texto.addStyle(miEstilo, null);
                doc = tp_texto.getStyledDocument();

            } catch (Exception e) {
                e.printStackTrace();
            }
            lista_borradores.setModel(lmodel);
        }

    }//GEN-LAST:event_bt_cargarBorradorActionPerformed

    private void jmi_signInActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jmi_signInActionPerformed
        jd_ingreso.setLocationRelativeTo(this);
        jd_ingreso.pack();
        jd_ingreso.setVisible(true);
    }//GEN-LAST:event_jmi_signInActionPerformed

    private void jmi_logOutActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jmi_logOutActionPerformed
        jd_ingreso.setVisible(false);
        panel.setVisible(false);
        jmi_logOut.setEnabled(false);
        jmi_signIn.setEnabled(true);
        cuentaActual.escribirCorreos();

        pf_ingreso_clave.setText("");
        jmi_cuenta.setEnabled(false);
        jmi_dirCuentas.setEnabled(false);
        
        
        limpiarArea();

        this.cuentaActual = null;
        this.correoSeleccionado = null;

    }//GEN-LAST:event_jmi_logOutActionPerformed

    private void bt_abrirBorradorActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_abrirBorradorActionPerformed

        DefaultListModel lmodel = (DefaultListModel) lista_borradores.getModel();

        lmodel.removeAllElements();
        borradores = new ArrayList<>();

        for (Correo borrador : cuentaActual.getBorradores()) {
            lmodel.addElement(borrador);
        }
        lista_borradores.setModel(lmodel);
        borradores.addAll(cuentaActual.getBorradores());

        jd_abrirBorrador.pack();
        jd_abrirBorrador.setLocationRelativeTo(jd_enviarCorreo);///////////////////
        jd_abrirBorrador.setModal(true);
        jd_abrirBorrador.setVisible(true);

    }//GEN-LAST:event_bt_abrirBorradorActionPerformed

    private void label_personalizarMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_label_personalizarMouseClicked

        try {
            Color c = JColorChooser.showDialog(this, "Elija un color de fondo", panel.getBackground());

            panel.setBackground(
                    c
            );
            int r = c.getRed();
            int g = c.getGreen();
            int b = c.getBlue();

            File f = new File("./ColorFondo.txt");

            if (f.exists()) {
                try {

                    FileWriter fw = new FileWriter(f, false);
                    BufferedWriter bw = new BufferedWriter(fw);

                    bw.write(r + ";" + g + ";" + b);

                    bw.close();
                    fw.close();

                } catch (IOException e) {
                }
            }
        } catch (Exception e) {
        }
    }//GEN-LAST:event_label_personalizarMouseClicked

    private void bt_mensajeNuevoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_mensajeNuevoActionPerformed

        jd_enviarCorreo.pack();
        jd_enviarCorreo.setLocationRelativeTo(this);
        jd_enviarCorreo.setModal(true);
        jd_enviarCorreo.setVisible(true);

    }//GEN-LAST:event_bt_mensajeNuevoActionPerformed

    private void jt_bandejasMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jt_bandejasMouseClicked
        if (evt.isMetaDown()) {

            int row = jt_bandejas.getClosestRowForLocation(evt.getX(), evt.getY());
            jt_bandejas.setSelectionRow(row);

            TreePath tp = jt_bandejas.getSelectionPath();
            DefaultMutableTreeNode node = (DefaultMutableTreeNode) tp.getLastPathComponent();

            if (node.getUserObject() instanceof Correo) {
                if (!((DefaultMutableTreeNode) node.getParent()).getUserObject().equals("Eliminados")) {
                    pm_opcionesCorreo.show(evt.getComponent(), evt.getX(), evt.getY());
                    correoSeleccionado = (Correo) node.getUserObject();

                    bandeja = ((DefaultMutableTreeNode) node.getParent()).getUserObject().toString();

                } else {
                    pm_eliminar.show(evt.getComponent(), evt.getX(), evt.getY());
                    correoSeleccionado = (Correo) node.getUserObject();

                    bandeja = ((DefaultMutableTreeNode) node.getParent()).getUserObject().toString();
                }
            }
        }
    }//GEN-LAST:event_jt_bandejasMouseClicked

    private void pmi_abrirCorreoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_pmi_abrirCorreoActionPerformed

        try {
            tp_mostrarCorreo.setText("");
            Documento temp = correoSeleccionado.getCuerpo();
            tp_mostrarCorreo.setText(temp.getTexto());
            tp_mostrarCorreo.setStyledDocument(temp.getDoc());
            //tp_mostrarCorreo.setText(temp.getTexto());

            //tp_mostrarCorreo.getStyledDocument().insertString(((Documento) temp).getDoc().getLength(), ((Documento) temp).getTexto(), );
            tf_mostrarAsunto.setText(correoSeleccionado.getAsunto());

            label_fechaEnvio.setText(new SimpleDateFormat("yyy/MMMM/dd").format(correoSeleccionado.getFechaEnvio()));

            chb_leido.setSelected(true);
            correoSeleccionado.setLeido(true);

            String emisor = correoSeleccionado.getEmisor().getNombre() + " " + correoSeleccionado.getEmisor().getApellido() + ", " + correoSeleccionado.getEmisor().getDireccionCorreoElectronico();
            label_emisor.setText("Enviado por: " + emisor);
            try {
                label_receptor.setText("Enviado a: " + correoSeleccionado.getReceptorPrincipal().getNombre() + " " + correoSeleccionado.getReceptorPrincipal().getApellido() + ", " + correoSeleccionado.getReceptorPrincipal().getDireccionCorreoElectronico());
            } catch (Exception e) {
                label_receptor.setText("");
            }

            bt_limpiar.setEnabled(true);

            miEstilo = temp.getEstilo().getName() + contador;
            estilo
                    = //temp.getEstilo();//
                    tp_texto.addStyle(miEstilo, null);
            doc = tp_mostrarCorreo.getStyledDocument();

            correoSeleccionado = null;
            bandeja = "";
        } catch (Exception e) {
            e.printStackTrace();
        }
    }//GEN-LAST:event_pmi_abrirCorreoActionPerformed

    private void pmi_eliminarCorreoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_pmi_eliminarCorreoActionPerformed
        try {
            cuentaActual.getEliminados().add(correoSeleccionado);

            switch (bandeja) {
                case "Enviados":
                    cuentaActual.getEnviados().remove(correoSeleccionado);
                    break;
                case "Recibidos":
                    cuentaActual.getRecibidos().remove(correoSeleccionado);
                    break;
                case "Borradores":
                    cuentaActual.getBorradores().remove(correoSeleccionado);
                    break;
                case "Spam":
                    cuentaActual.getSpam().remove(correoSeleccionado);
                    break;
                default:
                    JOptionPane.showMessageDialog(this, "Error");
            }
            cuentaActual.escribirCorreos();
            correoSeleccionado = null;
            bandeja = "";
            cargarArbol();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }//GEN-LAST:event_pmi_eliminarCorreoActionPerformed

    private void pmi_marcarNoLeidoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_pmi_marcarNoLeidoActionPerformed
        correoSeleccionado.setLeido(false);
        cuentaActual.escribirCorreos();
        correoSeleccionado = null;
        bandeja = "";
    }//GEN-LAST:event_pmi_marcarNoLeidoActionPerformed

    private void bt_limpiarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_limpiarActionPerformed
        limpiarArea();
    }//GEN-LAST:event_bt_limpiarActionPerformed

    private void jmi_cuentaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jmi_cuentaActionPerformed
        label_nombre.setText(cuentaActual.getNombre());
        label_apellido.setText(cuentaActual.getApellido());
        label_direccionCorreo.setText(cuentaActual.getDireccionCorreoElectronico());

        jd_adminCuenta.pack();
        jd_adminCuenta.setModal(true);
        jd_adminCuenta.setLocationRelativeTo(this);
        jd_adminCuenta.setVisible(true);
    }//GEN-LAST:event_jmi_cuentaActionPerformed

    private void bt_cambiarNombreActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_cambiarNombreActionPerformed
        try {
            String nombre = JOptionPane.showInputDialog(jd_adminCuenta, "Ingrese el nuevo nombre:", "Nombre", JOptionPane.INFORMATION_MESSAGE);
            if (!nombre.trim().equals("")) {
                label_nombre.setText(nombre);
            }
        } catch (Exception e) {
        }
    }//GEN-LAST:event_bt_cambiarNombreActionPerformed

    private void bt_cambiarApellidoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_cambiarApellidoActionPerformed
        try {
            String apellido = JOptionPane.showInputDialog(jd_adminCuenta, "Ingrese el nuevo apellido:", "Apellido", JOptionPane.INFORMATION_MESSAGE);
            if (!apellido.trim().equals("")) {
                label_apellido.setText(apellido);
            }
        } catch (Exception e) {
        }
    }//GEN-LAST:event_bt_cambiarApellidoActionPerformed

    private void bt_cambiarDireccionActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_cambiarDireccionActionPerformed
        try {
            String direccion = JOptionPane.showInputDialog(jd_adminCuenta, "Ingrese la nueva direccion de correo:\n(no incluya @minigmail.edu)", "Dirección de correo", JOptionPane.INFORMATION_MESSAGE);
            if (verificarDireccion(direccion)) {
                label_direccionCorreo.setText(direccion);
            }
        } catch (Exception e) {
        }
    }//GEN-LAST:event_bt_cambiarDireccionActionPerformed

    private void bt_guardarCambiosActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_guardarCambiosActionPerformed
        try {

            String nombre = label_nombre.getText().trim();
            String apellido = label_apellido.getText().trim();
            String direccion = label_direccionCorreo.getText().trim();

            //modificar
            Dba dab = new Dba("./Base2.accdb");
            dab.conectar();

            try {
                dab.query.execute("update Cuentas set Nombre='" + nombre + "' where DireccionCorreo='" + cuentaActual.toString() + "'");
                dab.query.execute("update Cuentas set Apellido='" + apellido + "' where DireccionCorreo='" + cuentaActual.toString() + "'");
                dab.query.execute("update Cuentas set DireccionCorreo='" + direccion + "' where DireccionCorreo='" + cuentaActual.toString() + "'");

                dab.commit();

                cuentaActual.setNombre(nombre);
                cuentaActual.setApellido(apellido);

                File f = new File("./Cuentas/" + cuentaActual.getDireccionCorreoElectronico());
                File f2 = new File("./Cuentas/" + direccion);
                if (f.renameTo(f2)) {
                    JOptionPane.showMessageDialog(jd_adminCuenta, "Cambios guardados", "Operación exitosa", JOptionPane.INFORMATION_MESSAGE);
                } else {
                    System.out.println("Error renombre");
                }

//                cuentaActual.cargarChats();
                cuentaActual.setDireccionCorreoElectronico(direccion);
//                cuentaActual.escribirCorreos();
//                cuentaActual.escribirChats();

            } catch (SQLException ex) {
                ex.printStackTrace();
            }

            //DireccionCorreo,Nombre,Apellido,Clave,FechaCreacion FROM Cuentas
            dab.desconectar();

            jd_adminCuenta.setVisible(false);
        } catch (Exception e) {
        }
    }//GEN-LAST:event_bt_guardarCambiosActionPerformed

    private void bt_cancelarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_cancelarActionPerformed
        jd_adminCuenta.setVisible(false);

        label_nombre.setText(cuentaActual.getNombre());
        label_apellido.setText(cuentaActual.getApellido());
        label_direccionCorreo.setText(cuentaActual.getDireccionCorreoElectronico());
    }//GEN-LAST:event_bt_cancelarActionPerformed

    private void bt_cambiarClaveActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_cambiarClaveActionPerformed

        jd_cambiarClave.pack();
        jd_cambiarClave.setModal(true);
        jd_cambiarClave.setLocationRelativeTo(jd_adminCuenta);
        jd_cambiarClave.setVisible(true);

    }//GEN-LAST:event_bt_cambiarClaveActionPerformed

    private void bt_eliminarCuentaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_eliminarCuentaActionPerformed

        int s = JOptionPane.showConfirmDialog(jd_adminCuenta, "¿Estás seguro de que deseas eliminar tu cuenta?\nToda tu información se perderá al realizar esta operación.", "Eliminar cuenta", JOptionPane.YES_NO_OPTION, JOptionPane.WARNING_MESSAGE);

        if (s == JOptionPane.YES_OPTION) {

            Dba db = new Dba("./Base2.accdb");
            db.conectar();
            try {
                db.query.execute("delete from Cuentas where DireccionCorreo='" + cuentaActual.toString() + "'");
                db.commit();

                File f = new File("./Correos/" + cuentaActual.getDireccionCorreoElectronico());

                if (f.exists()) {
                    f.delete();
                }

                ((DefaultComboBoxModel) cb_ingreso_cuentas.getModel()).removeElement(cuentaActual);

                JOptionPane.showMessageDialog(jd_cambiarClave, "Cuenta eliminada con éxito.", "Eliminación exitosa", JOptionPane.INFORMATION_MESSAGE);
                jd_adminCuenta.setVisible(false);
                jmi_logOutActionPerformed(evt);

            } catch (SQLException ex) {
                ex.printStackTrace();
            }
            db.desconectar();
        }
    }//GEN-LAST:event_bt_eliminarCuentaActionPerformed

    private void bt_nuevaClaveActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_nuevaClaveActionPerformed
        if (pf_claveActual.getText().equals(cuentaActual.getClave())) {

            if (pf_claveNueva.getText().equals(pf_confirmacionNueva.getText())) {

                String clave = pf_claveNueva.getText();

                Dba dab = new Dba("./Base2.accdb");
                dab.conectar();

                try {
                    dab.query.execute("update Cuentas set Clave='" + clave + "' where DireccionCorreo='" + cuentaActual.toString() + "'");
                    dab.commit();

                    cuentaActual.setClave(clave);

                    JOptionPane.showMessageDialog(jd_cambiarClave, "Clave cambiada con éxito.", "Cambio exitoso", JOptionPane.INFORMATION_MESSAGE);
                    jd_cambiarClave.setVisible(false);
                    pf_claveActual.setText("");
                    pf_claveNueva.setText("");
                    pf_confirmacionNueva.setText("");

                } catch (SQLException ex) {
                    ex.printStackTrace();
                }

                //DireccionCorreo,Nombre,Apellido,Clave,FechaCreacion FROM Cuentas
                dab.desconectar();

            } else {
                JOptionPane.showMessageDialog(jd_cambiarClave, "La confirmación de la clave nueva no es correcta.", "Clave no es correcta", 0);
                pf_claveActual.setText("");
                pf_claveNueva.setText("");
                pf_confirmacionNueva.setText("");
            }

        } else {
            //Si la clave ingresada en pf_claveActual no es correcta
            JOptionPane.showMessageDialog(jd_cambiarClave, "La clave actual no coincide con el ingreso.", "Clave no es correcta", 0);
            pf_claveActual.setText("");
            pf_claveNueva.setText("");
            pf_confirmacionNueva.setText("");
        }
    }//GEN-LAST:event_bt_nuevaClaveActionPerformed

    private void jmi_dirCuentasActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jmi_dirCuentasActionPerformed
        directorio();
        jd_directorioCuentas.pack();
        jd_directorioCuentas.setModal(true);
        jd_directorioCuentas.setLocationRelativeTo(this);
        jd_directorioCuentas.setVisible(true);
    }//GEN-LAST:event_jmi_dirCuentasActionPerformed

    private void tf_buscarNombreKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_tf_buscarNombreKeyPressed
        DefaultTableModel tmodel = (DefaultTableModel) tb_dir.getModel();

        for (int i = tmodel.getRowCount() - 1; i >= 0; i--) {
            tmodel.removeRow(i);
        }

        DefaultComboBoxModel cmodel = (DefaultComboBoxModel) cb_ingreso_cuentas.getModel();

        for (int i = 0; i < cmodel.getSize(); i++) {
            Cuenta c = (Cuenta) cmodel.getElementAt(i);

            if ((c.getNombre() + " " + c.getApellido() + " " + c.getDireccionCorreoElectronico())
                    .toUpperCase().contains(tf_buscarNombre.getText().toUpperCase())) {

                Object[] row = new Object[]{
                    c.getNombre(),
                    c.getApellido(),
                    c,
                    new SimpleDateFormat("yyyy/MM/dd").format(c.getFechaDeCreacion())
                };

                tmodel.addRow(row);
            }
        }
    }//GEN-LAST:event_tf_buscarNombreKeyPressed

    private void tb_dirMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tb_dirMouseClicked
        if (evt.getClickCount() >= 2) {
            mostrarPropiedades();
        }
    }//GEN-LAST:event_tb_dirMouseClicked

    private void bt_chatearActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_chatearActionPerformed
        String nombre = cuentaActual.getNombre() + " " + cuentaActual.getApellido();
        try {
            //Creamos un nuevo socket
            socket = new Socket("localhost", 4900);

            //Inicializado del hilo
            hc = new HiloChat(ta_mensajes, cb_usuarios, list_usuarios);

            //Salida y entrada de objetos
            salidaObjeto = new ObjectOutputStream(socket.getOutputStream());
            entradaObjeto = new ObjectInputStream(socket.getInputStream());

            //Enviamos un objeto Pregunta con el nombre
            salidaObjeto.writeObject(new Pregunta(10, nombre));

            //Un socket no soporta que se creen dos ObjectOutputStreams, 
            //ya que se crean dos headers diferentes...
            //Por ello, solamente le seteamos el existente al hilo
            hc.setEntradaObjeto(entradaObjeto);

            //Corremos el hilo
            hc.start();

        } catch (IOException ex) {
            ex.printStackTrace();
        }

        jd_chat.pack();
        jd_chat.setModal(true);
        jd_chat.setLocationRelativeTo(this);
        jd_chat.setTitle("Chat " + nombre);
        jd_chat.setVisible(true);

    }//GEN-LAST:event_bt_chatearActionPerformed

    private void bt_agregarUsuarioActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_agregarUsuarioActionPerformed
        if (cb_usuarios.getSelectedIndex() >= 0) {
            try {
                DefaultComboBoxModel cmodel = (DefaultComboBoxModel) cb_usuarios.getModel();
                DefaultListModel lmodel = (DefaultListModel) list_usuarios.getModel();

                if (!lmodel.contains(cmodel.getElementAt(cb_usuarios.getSelectedIndex()))) {
                    lmodel.addElement((String) cmodel.getElementAt(cb_usuarios.getSelectedIndex()));
                }
            } catch (Exception e) {
            }
        }
    }//GEN-LAST:event_bt_agregarUsuarioActionPerformed

    private void bt_eliminarUsuarioActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_eliminarUsuarioActionPerformed
        if (list_usuarios.getSelectedIndex() >= 0) {
            try {
                DefaultListModel lmodel = (DefaultListModel) list_usuarios.getModel();
                lmodel.removeElementAt(list_usuarios.getSelectedIndex());
            } catch (Exception e) {
            }
        }
    }//GEN-LAST:event_bt_eliminarUsuarioActionPerformed

    private void bt_enviarMensajeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_enviarMensajeActionPerformed
        try {
            actualizarAmigos();
            String mensaje = cuentaActual.getNombre() + " " + cuentaActual.getApellido() + ":\n" + tf_mensaje.getText() + "\n";
            salidaObjeto.writeObject(new Pregunta(0, mensaje));
            tf_mensaje.setText("");
        } catch (Exception e) {
        }
    }//GEN-LAST:event_bt_enviarMensajeActionPerformed

    private void jd_chatComponentHidden(java.awt.event.ComponentEvent evt) {//GEN-FIRST:event_jd_chatComponentHidden
        hc.stop();
    }//GEN-LAST:event_jd_chatComponentHidden

    private void cb_usuariosItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_cb_usuariosItemStateChanged
        /*if (evt.getStateChange() == 2) {
            if (cb_usuarios.getSelectedIndex() >= 0) {
                DefaultComboBoxModel model = (DefaultComboBoxModel) cb_usuarios.getModel();
                String nombre = (String) model.getElementAt(cb_usuarios.getSelectedIndex());
                boolean flag = true;
                for (Chat chat : cuentaActual.getChats()) {
                    if (chat.getPersona().getDireccionCorreoElectronico().equals(nombre)) {
                        ta_mensajes.setText(chat.getHistorial());
                        flag = false;
                        chatActual = chat;
                        break;
                    }
                }
                if (flag) {
                    ta_mensajes.setText("");
                    DefaultListModel lmodel = (DefaultListModel) list_usuarios.getModel();
                    DefaultComboBoxModel cmodel = (DefaultComboBoxModel) cb_ingreso_cuentas.getModel();
                    OUTER:
                    for (int i = 0; i < lmodel.getSize(); i++) {
                        for (int j = 0; j < cmodel.getSize(); j++) {
                            if (((Cuenta) cmodel.getElementAt(j)).getDireccionCorreoElectronico().equals((String) lmodel.get(i))) {
                                chatActual = new Chat(cuentaActual, (Cuenta) cmodel.getElementAt(j), "");
                                cuentaActual.getChats().add(chatActual);
                                cuentaActual.escribirChats();
                                break OUTER;
                            }
                        }
                    }
                }
            }
        }
        */
    }//GEN-LAST:event_cb_usuariosItemStateChanged

    private void ta_mensajesPropertyChange(java.beans.PropertyChangeEvent evt) {//GEN-FIRST:event_ta_mensajesPropertyChange
        try {
            if (!chatActual.getHistorial().equals(ta_mensajes.getText())) {
                chatActual.setHistorial(ta_mensajes.getText());
                cuentaActual.escribirChats();
            }
        } catch (Exception e) {
        }

    }//GEN-LAST:event_ta_mensajesPropertyChange

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
        mostrarPropiedades();
    }//GEN-LAST:event_jButton1ActionPerformed

    private void bt_enviarCorreoDirActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_enviarCorreoDirActionPerformed
        if (tb_dir.getSelectedRow() >= 0) {
            enviarCorreoDir(evt, jd_directorioCuentas);
        }
    }//GEN-LAST:event_bt_enviarCorreoDirActionPerformed

    private void bt_enviarCorreoPActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_enviarCorreoPActionPerformed
        if (tb_dir.getSelectedRow() >= 0) {
            enviarCorreoDir(evt, jd_propiedades);
        }
    }//GEN-LAST:event_bt_enviarCorreoPActionPerformed

    private void bt_agregarGrupoPActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_agregarGrupoPActionPerformed

        DefaultListModel lmodel = new DefaultListModel();
        //lista_grupos.setModel(lmodel);
        for (GrupoContactos grupo : cuentaActual.getGrupos()) {
            lmodel.addElement(grupo);
        }
        lista_grupos.setModel(lmodel);

        bt_agregarFinal.setVisible(true);
        bt_enviarCorreoGrupal.setVisible(false);

        jd_abrirGrupos.pack();
        jd_abrirGrupos.setModal(true);
        jd_abrirGrupos.setLocationRelativeTo(jd_propiedades);
        jd_abrirGrupos.setVisible(true);
    }//GEN-LAST:event_bt_agregarGrupoPActionPerformed

    private void bt_crearGrupoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_crearGrupoActionPerformed
        String nombreGrupo = tf_nombreGrupo.getText().trim();
        if (!nombreGrupo.equals("")) {

            //Lo agrego a la lista de la cuenta
            cuentaActual.agregarGrupo(nombreGrupo);
            //cuentaActual.escribirGrupos();

            //cuentaActual.escribirGrupos();
            JOptionPane.showMessageDialog(jd_nuevoGrupo, "Grupo creado con éxito.", "Operación exitosa", JOptionPane.INFORMATION_MESSAGE);
            jd_nuevoGrupo.setVisible(false);
        } else {
            JOptionPane.showMessageDialog(jd_nuevoGrupo, "Ingrese un nombre válido para el grupo.", "Error con nombre", JOptionPane.ERROR_MESSAGE);
        }
        tf_nombreGrupo.setText("");
    }//GEN-LAST:event_bt_crearGrupoActionPerformed

    private void bt_agregarFinalActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_agregarFinalActionPerformed
        if (lista_grupos.getSelectedIndex() >= 0) {
            DefaultListModel lmodel = (DefaultListModel) lista_grupos.getModel();
            DefaultTableModel tmodel = (DefaultTableModel) tb_dir.getModel();
            //Agregamos una cuenta específica a un grupo
            GrupoContactos gc = (GrupoContactos) lmodel.getElementAt(lista_grupos.getSelectedIndex());
            Cuenta c = (Cuenta) tmodel.getValueAt(tb_dir.getSelectedRow(), 2);
            if (!gc.getContactos().contains(c.getDireccionCorreoElectronico())) {
                gc.getContactos().add(c.getDireccionCorreoElectronico());

                File f = new File("./Cuentas/" + cuentaActual.getDireccionCorreoElectronico() + "/Grupos/" + gc.getNombreGrupo() + ".txt");
                try {
                    FileWriter fw = new FileWriter(f, true);
                    BufferedWriter bw = new BufferedWriter(fw);

                    bw.write(c.getDireccionCorreoElectronico());
                    bw.newLine();

                    bw.flush();
                    bw.close();

                } catch (Exception e) {
                    e.printStackTrace();
                }

                JOptionPane.showMessageDialog(jd_nuevoGrupo, "Cuenta agregada al grupo de contactos.", "Operación exitosa", JOptionPane.INFORMATION_MESSAGE);
                jd_abrirGrupos.setVisible(false);
            } else {
                JOptionPane.showMessageDialog(jd_nuevoGrupo, "La cuenta ya es parte de este grupo de contactos.", "Error con agregado al grupo", JOptionPane.ERROR_MESSAGE);
            }
        }
    }//GEN-LAST:event_bt_agregarFinalActionPerformed

    private void bt_crearGrupoDirActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_crearGrupoDirActionPerformed
        jd_nuevoGrupo.pack();
        jd_nuevoGrupo.setModal(true);
        jd_nuevoGrupo.setLocationRelativeTo(jd_directorioCuentas);
        jd_nuevoGrupo.setVisible(true);
    }//GEN-LAST:event_bt_crearGrupoDirActionPerformed

    private void bt_agregarGrupoDirActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_agregarGrupoDirActionPerformed
        if (tb_dir.getSelectedRow() >= 0) {
            DefaultListModel lmodel = new DefaultListModel();
            for (GrupoContactos grupo : cuentaActual.getGrupos()) {
                lmodel.addElement(grupo);
            }
            lista_grupos.setModel(lmodel);

            bt_agregarFinal.setVisible(true);
            bt_enviarCorreoGrupal.setVisible(false);

            jd_abrirGrupos.pack();
            jd_abrirGrupos.setModal(true);
            jd_abrirGrupos.setLocationRelativeTo(jd_directorioCuentas);
            jd_abrirGrupos.setVisible(true);
        }
    }//GEN-LAST:event_bt_agregarGrupoDirActionPerformed

    private void bt_enviarCorreoGrupalActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_enviarCorreoGrupalActionPerformed
        if (lista_grupos.getSelectedIndex() >= 0) {
            DefaultListModel lmodel = (DefaultListModel) lista_grupos.getModel();
            DefaultListModel ldes = (DefaultListModel) list_destinatarios.getModel();
            DefaultComboBoxModel cmodel = (DefaultComboBoxModel) cb_destinatarios.getModel();

            tp_texto.setText("");
            tf_asunto.setText("");
            cb_destinatarios.setSelectedIndex(-1);
            ldes.removeAllElements();

            GrupoContactos gc = (GrupoContactos) lmodel.getElementAt(lista_grupos.getSelectedIndex());
            for (String contacto : gc.getContactos()) {

                for (int i = 0; i < cmodel.getSize(); i++) {
                    if (((Cuenta) cmodel.getElementAt(i)).getDireccionCorreoElectronico().equals(contacto)) {
                        ldes.addElement((Cuenta) cmodel.getElementAt(i));
                        cuentasDestinatarios.add((Cuenta) cmodel.getElementAt(i));
                        break;
                    }
                }
            }

            correoSeleccionado = null;

            miEstilo = "miEstilo" + (contador++);
            estilo = tp_texto.addStyle(miEstilo, null);

            jd_abrirBorrador.setVisible(false);

            jd_enviarCorreo.pack();
            jd_enviarCorreo.setLocationRelativeTo(jd_abrirGrupos);
            jd_enviarCorreo.setModal(true);
            jd_enviarCorreo.setVisible(true);

        }
    }//GEN-LAST:event_bt_enviarCorreoGrupalActionPerformed

    private void bt_verGruposActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_verGruposActionPerformed
        DefaultListModel lmodel = new DefaultListModel();
        //lista_grupos.setModel(lmodel);
        for (GrupoContactos grupo : cuentaActual.getGrupos()) {
            lmodel.addElement(grupo);
        }
        lista_grupos.setModel(lmodel);

        bt_agregarFinal.setVisible(false);
        bt_enviarCorreoGrupal.setVisible(true);

        jd_abrirGrupos.pack();
        jd_abrirGrupos.setModal(true);
        jd_abrirGrupos.setLocationRelativeTo(jd_directorioCuentas);
        jd_abrirGrupos.setVisible(true);
    }//GEN-LAST:event_bt_verGruposActionPerformed

    private void jmi_eliminarDefActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jmi_eliminarDefActionPerformed
        try {
            cuentaActual.getEliminados().remove(correoSeleccionado);

            cuentaActual.escribirCorreos();
            correoSeleccionado = null;
            bandeja = "";
            cargarArbol();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }//GEN-LAST:event_jmi_eliminarDefActionPerformed

    private void bt_programarTareaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_programarTareaActionPerformed
        jd_programarTarea.pack();
        jd_programarTarea.setModal(true);
        jd_programarTarea.setLocationRelativeTo(this);
        jd_programarTarea.setVisible(true);
    }//GEN-LAST:event_bt_programarTareaActionPerformed

    private void chb_sabadoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_chb_sabadoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_chb_sabadoActionPerformed

    private void cb_estadoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cb_estadoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_cb_estadoActionPerformed

    private void bt_guardarTareaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_guardarTareaActionPerformed
        try {

            String asunto = tf_asuntoTarea.getText().trim();
            Date fechaInicio = jdc_inicio.getDate();
            Date fechaVencimiento = jdc_final.getDate();
            String estado = cb_estado.getSelectedItem().toString();
            String prioridad = cb_prioridad.getSelectedItem().toString();
            int hora = Integer.parseInt(sp_horas.getValue().toString());
            int minuto = Integer.parseInt(sp_minutos.getValue().toString());
            boolean semanal = chb_semanal.isSelected();
            boolean[] dias = new boolean[]{
                chb_domingo.isSelected(),
                chb_lunes.isSelected(),
                chb_martes.isSelected(),
                chb_miercoles.isSelected(),
                chb_jueves.isSelected(),
                chb_viernes.isSelected(),
                chb_sabado.isSelected()
            };
            Date fechaFinalRecordatorio = (rb_despuesDeFecha.isSelected()) ? jdc_finalRep.getDate() : null;
            int maxRepeticiones = (rb_despuesDeRep.isSelected()) ? Integer.parseInt(sp_repeticiones.getValue().toString()) : 0;
            String descripcion = ta_descripTarea.getText().trim();

            Tarea t = new Tarea(asunto, fechaInicio, fechaVencimiento, estado, prioridad, hora, minuto, semanal, dias, fechaFinalRecordatorio, maxRepeticiones, descripcion);
            cuentaActual.getTareas().add(t);
            hilosTareas.add(new HiloTarea(t, cuentaActual));
            hilosTareas.get(hilosTareas.size() - 1).start();
            cuentaActual.escribirTareas();

            jd_programarTarea.setVisible(false);
            limpiarTarea();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }//GEN-LAST:event_bt_guardarTareaActionPerformed

    private void bt_cancelarTareaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_cancelarTareaActionPerformed
        jd_programarTarea.setVisible(false);
        limpiarTarea();
    }//GEN-LAST:event_bt_cancelarTareaActionPerformed

    private void tf_asuntoFiltradoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_tf_asuntoFiltradoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_tf_asuntoFiltradoActionPerformed

    private void bt_crearFiltroHoraActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_crearFiltroHoraActionPerformed
        try {
            int hi = Integer.parseInt(sp_horasInicio.getValue().toString());
            int mi = Integer.parseInt(sp_minutosInicio.getValue().toString());
            int hf = Integer.parseInt(sp_horasFinal.getValue().toString());
            int mf = Integer.parseInt(sp_minutosFinal.getValue().toString());

            sp_horasInicio.setValue(8);
            sp_horasFinal.setValue(8);
            sp_minutosInicio.setValue(0);
            sp_minutosFinal.setValue(0);

            Filtro filtro = new FiltroHora(hi, mi, hf, mf);
            cuentaActual.getFiltros().add(filtro);
            cuentaActual.escribirFiltros();

            DefaultListModel lmodel = (DefaultListModel) list_filtros.getModel();
            lmodel.addElement(filtro);
            list_filtros.setModel(lmodel);
        } catch (Exception e) {
        }
    }//GEN-LAST:event_bt_crearFiltroHoraActionPerformed

    private void bt_crearFiltroCuentaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_crearFiltroCuentaActionPerformed
        try {
            if (cb_filtrados.getSelectedIndex() >= 0) {

                String direccion = ((Cuenta) ((DefaultComboBoxModel) cb_filtrados.getModel()).getElementAt(cb_filtrados.getSelectedIndex())).getDireccionCorreoElectronico();
                cb_filtrados.setSelectedIndex(-1);

                Filtro filtro = new FiltroCuenta(direccion);
                cuentaActual.getFiltros().add(filtro);
                cuentaActual.escribirFiltros();

                DefaultListModel lmodel = (DefaultListModel) list_filtros.getModel();
                lmodel.addElement(filtro);
                list_filtros.setModel(lmodel);
            }
        } catch (Exception e) {
        }
    }//GEN-LAST:event_bt_crearFiltroCuentaActionPerformed

    private void bt_crearFiltroAsuntoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_crearFiltroAsuntoActionPerformed
        try {
            String palabras = tf_asuntoFiltrado.getText().trim().toUpperCase();
            tf_asuntoFiltrado.setText("");

            Filtro filtro = new FiltroAsunto(palabras);
            cuentaActual.getFiltros().add(filtro);
            cuentaActual.escribirFiltros();

            DefaultListModel lmodel = (DefaultListModel) list_filtros.getModel();
            lmodel.addElement(filtro);
            list_filtros.setModel(lmodel);
        } catch (Exception e) {
        }
    }//GEN-LAST:event_bt_crearFiltroAsuntoActionPerformed

    private void list_filtrosKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_list_filtrosKeyPressed
        if (list_filtros.getSelectedIndex() >= 0) {
            if (evt.getKeyCode() == KeyEvent.VK_DELETE) {
                DefaultListModel lmodel = (DefaultListModel) list_filtros.getModel();

                Filtro f = (Filtro) lmodel.getElementAt(list_filtros.getSelectedIndex());
                lmodel.removeElement(f);
                cuentaActual.getFiltros().remove(f);
                cuentaActual.escribirFiltros();

                list_filtros.setModel(lmodel);
            }
        }
    }//GEN-LAST:event_list_filtrosKeyPressed

    private void bt_programarTarea1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bt_programarTarea1ActionPerformed
        DefaultListModel lmodel = (DefaultListModel) list_filtros.getModel();
        lmodel.removeAllElements();

        for (Filtro filtro : cuentaActual.getFiltros()) {
            lmodel.addElement(filtro);
        }
        list_filtros.setModel(lmodel);

        jd_filtros.pack();
        jd_filtros.setModal(true);
        jd_filtros.setLocationRelativeTo(this);
        jd_filtros.setVisible(true);
    }//GEN-LAST:event_bt_programarTarea1ActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(MiniGmail.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(MiniGmail.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(MiniGmail.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(MiniGmail.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new MiniGmail().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JToolBar barra_herramientas;
    private javax.swing.ButtonGroup bg_finalTarea;
    private javax.swing.JButton bt_abrirBorrador;
    private javax.swing.JButton bt_agregarDestinatario;
    private javax.swing.JButton bt_agregarFinal;
    private javax.swing.JButton bt_agregarGrupoDir;
    private javax.swing.JButton bt_agregarGrupoP;
    private javax.swing.JButton bt_agregarUsuario;
    private javax.swing.JButton bt_cambiarApellido;
    private javax.swing.JButton bt_cambiarClave;
    private javax.swing.JButton bt_cambiarDireccion;
    private javax.swing.JButton bt_cambiarNombre;
    private javax.swing.JButton bt_cancelar;
    private javax.swing.JButton bt_cancelarTarea;
    private javax.swing.JButton bt_cargarBorrador;
    private javax.swing.JButton bt_chatear;
    private javax.swing.JButton bt_colorLetra;
    private javax.swing.JButton bt_crearCuenta;
    private javax.swing.JButton bt_crearFiltroAsunto;
    private javax.swing.JButton bt_crearFiltroCuenta;
    private javax.swing.JButton bt_crearFiltroHora;
    private javax.swing.JButton bt_crearGrupo;
    private javax.swing.JButton bt_crearGrupoDir;
    private javax.swing.JButton bt_cursiva;
    private javax.swing.JButton bt_eliminarCuenta;
    private javax.swing.JButton bt_eliminarDestinatario;
    private javax.swing.JButton bt_eliminarUsuario;
    private javax.swing.JButton bt_enviarCorreo;
    private javax.swing.JButton bt_enviarCorreoDir;
    private javax.swing.JButton bt_enviarCorreoGrupal;
    private javax.swing.JButton bt_enviarCorreoP;
    private javax.swing.JButton bt_enviarMensaje;
    private javax.swing.JButton bt_guardarBorrador;
    private javax.swing.JButton bt_guardarCambios;
    private javax.swing.JButton bt_guardarTarea;
    private javax.swing.JButton bt_limpiar;
    private javax.swing.JButton bt_login;
    private javax.swing.JButton bt_mensajeNuevo;
    private javax.swing.JButton bt_negrita;
    private javax.swing.JButton bt_nuevaClave;
    private javax.swing.JButton bt_programarTarea;
    private javax.swing.JButton bt_programarTarea1;
    private javax.swing.JButton bt_resaltado;
    private javax.swing.JButton bt_showCrear;
    private javax.swing.JButton bt_subrayado;
    private javax.swing.JButton bt_verGrupos;
    private javax.swing.JComboBox<String> cb_destinatarios;
    private javax.swing.JComboBox<String> cb_estado;
    private javax.swing.JComboBox<String> cb_filtrados;
    private javax.swing.JComboBox<String> cb_font;
    private javax.swing.JComboBox<String> cb_ingreso_cuentas;
    private javax.swing.JComboBox<String> cb_prioridad;
    private javax.swing.JComboBox<String> cb_tamaño;
    private javax.swing.JComboBox<String> cb_usuarios;
    private javax.swing.JCheckBox chb_domingo;
    private javax.swing.JCheckBox chb_jueves;
    private javax.swing.JCheckBox chb_leido;
    private javax.swing.JCheckBox chb_lunes;
    private javax.swing.JCheckBox chb_martes;
    private javax.swing.JCheckBox chb_miercoles;
    private javax.swing.JCheckBox chb_sabado;
    private javax.swing.JCheckBox chb_semanal;
    private javax.swing.JCheckBox chb_viernes;
    private javax.swing.JButton jButton1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel16;
    private javax.swing.JLabel jLabel17;
    private javax.swing.JLabel jLabel18;
    private javax.swing.JLabel jLabel19;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel20;
    private javax.swing.JLabel jLabel21;
    private javax.swing.JLabel jLabel22;
    private javax.swing.JLabel jLabel23;
    private javax.swing.JLabel jLabel24;
    private javax.swing.JLabel jLabel25;
    private javax.swing.JLabel jLabel26;
    private javax.swing.JLabel jLabel27;
    private javax.swing.JLabel jLabel28;
    private javax.swing.JLabel jLabel29;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel30;
    private javax.swing.JLabel jLabel31;
    private javax.swing.JLabel jLabel32;
    private javax.swing.JLabel jLabel33;
    private javax.swing.JLabel jLabel34;
    private javax.swing.JLabel jLabel35;
    private javax.swing.JLabel jLabel36;
    private javax.swing.JLabel jLabel37;
    private javax.swing.JLabel jLabel38;
    private javax.swing.JLabel jLabel39;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel40;
    private javax.swing.JLabel jLabel41;
    private javax.swing.JLabel jLabel42;
    private javax.swing.JLabel jLabel43;
    private javax.swing.JLabel jLabel44;
    private javax.swing.JLabel jLabel45;
    private javax.swing.JLabel jLabel46;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JPanel jPanel7;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane10;
    private javax.swing.JScrollPane jScrollPane11;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JScrollPane jScrollPane4;
    private javax.swing.JScrollPane jScrollPane5;
    private javax.swing.JScrollPane jScrollPane6;
    private javax.swing.JScrollPane jScrollPane7;
    private javax.swing.JScrollPane jScrollPane8;
    private javax.swing.JScrollPane jScrollPane9;
    private javax.swing.JToolBar.Separator jSeparator1;
    private javax.swing.JSeparator jSeparator10;
    private javax.swing.JToolBar.Separator jSeparator11;
    private javax.swing.JToolBar.Separator jSeparator2;
    private javax.swing.JToolBar.Separator jSeparator3;
    private javax.swing.JSeparator jSeparator4;
    private javax.swing.JToolBar.Separator jSeparator5;
    private javax.swing.JToolBar.Separator jSeparator6;
    private javax.swing.JToolBar.Separator jSeparator7;
    private javax.swing.JToolBar.Separator jSeparator8;
    private javax.swing.JToolBar.Separator jSeparator9;
    private javax.swing.JToolBar jToolBar1;
    private javax.swing.JToolBar jToolBar2;
    private javax.swing.JToolBar jToolBar3;
    private javax.swing.JDialog jd_abrirBorrador;
    private javax.swing.JDialog jd_abrirGrupos;
    private javax.swing.JDialog jd_adminCuenta;
    private javax.swing.JDialog jd_cambiarClave;
    private javax.swing.JDialog jd_chat;
    private javax.swing.JDialog jd_crearCuenta;
    private javax.swing.JDialog jd_directorioCuentas;
    private javax.swing.JDialog jd_enviarCorreo;
    private javax.swing.JDialog jd_filtros;
    private javax.swing.JDialog jd_ingreso;
    private javax.swing.JDialog jd_nuevoGrupo;
    private javax.swing.JDialog jd_programarTarea;
    private javax.swing.JDialog jd_propiedades;
    private com.toedter.calendar.JDateChooser jdc_final;
    private com.toedter.calendar.JDateChooser jdc_finalRep;
    private com.toedter.calendar.JDateChooser jdc_inicio;
    private javax.swing.JMenu jm_ayuda;
    private javax.swing.JMenu jm_opciones;
    private javax.swing.JMenuItem jmi_cuenta;
    private javax.swing.JMenuItem jmi_dirCuentas;
    private javax.swing.JMenuItem jmi_eliminarDef;
    private javax.swing.JMenuItem jmi_logOut;
    private javax.swing.JMenuItem jmi_signIn;
    private javax.swing.JTree jt_bandejas;
    private javax.swing.JLabel label_apellido;
    private javax.swing.JLabel label_apellidoP;
    private javax.swing.JLabel label_direccionCorreo;
    private javax.swing.JLabel label_direccionP;
    private javax.swing.JLabel label_emisor;
    private javax.swing.JLabel label_fechaEnvio;
    private javax.swing.JLabel label_fechaP;
    private javax.swing.JLabel label_nombre;
    private javax.swing.JLabel label_nombreP;
    private javax.swing.JLabel label_personalizar;
    private javax.swing.JLabel label_propietario;
    private javax.swing.JLabel label_receptor;
    private javax.swing.JList<String> list_destinatarios;
    private javax.swing.JList<String> list_filtros;
    private javax.swing.JList<String> list_usuarios;
    private javax.swing.JList<String> lista_borradores;
    private javax.swing.JList<String> lista_grupos;
    private javax.swing.JMenuBar menu_bar;
    private javax.swing.JPanel panel;
    private javax.swing.JPanel panel_ingreso;
    private javax.swing.JPasswordField pf_clave;
    private javax.swing.JPasswordField pf_claveActual;
    private javax.swing.JPasswordField pf_claveNueva;
    private javax.swing.JPasswordField pf_confirmacion;
    private javax.swing.JPasswordField pf_confirmacionNueva;
    private javax.swing.JPasswordField pf_ingreso_clave;
    private javax.swing.JPopupMenu pm_eliminar;
    private javax.swing.JPopupMenu pm_opcionesCorreo;
    private javax.swing.JMenuItem pmi_abrirCorreo;
    private javax.swing.JMenuItem pmi_eliminarCorreo;
    private javax.swing.JMenuItem pmi_marcarNoLeido;
    private javax.swing.JRadioButton rb_despuesDeFecha;
    private javax.swing.JRadioButton rb_despuesDeRep;
    private javax.swing.JRadioButton rb_sinFecha;
    private javax.swing.JSpinner sp_horas;
    private javax.swing.JSpinner sp_horasFinal;
    private javax.swing.JSpinner sp_horasInicio;
    private javax.swing.JSpinner sp_minutos;
    private javax.swing.JSpinner sp_minutosFinal;
    private javax.swing.JSpinner sp_minutosInicio;
    private javax.swing.JSpinner sp_repeticiones;
    private javax.swing.JTextArea ta_descripTarea;
    private javax.swing.JTextArea ta_mensajes;
    private javax.swing.JTable tb_dir;
    private javax.swing.JTextField tf_apellido;
    private javax.swing.JTextField tf_asunto;
    private javax.swing.JTextField tf_asuntoFiltrado;
    private javax.swing.JTextField tf_asuntoTarea;
    private javax.swing.JTextField tf_buscarNombre;
    private javax.swing.JTextField tf_direccion;
    private javax.swing.JTextField tf_mensaje;
    private javax.swing.JTextField tf_mostrarAsunto;
    private javax.swing.JTextField tf_nombre;
    private javax.swing.JTextField tf_nombreGrupo;
    private javax.swing.JTextPane tp_mostrarCorreo;
    private javax.swing.JTextPane tp_texto;
    // End of variables declaration//GEN-END:variables

    Style estilo;
    StyledDocument doc;

    Cuenta cuentaActual;
    Correo correoSeleccionado;
    String bandeja;

    long contador;
    String miEstilo;

    ArrayList<Correo> borradores = new ArrayList<>();
    ArrayList<Cuenta> cuentasDestinatarios = new ArrayList<>();

    HiloChat hc;
    Socket socket = null;
    ObjectOutputStream salidaObjeto = null;
    ObjectInputStream entradaObjeto = null;

    Chat chatActual = null;

    ArrayList<HiloTarea> hilosTareas = new ArrayList<>();

    private void limpiarArea() {
        tf_mostrarAsunto.setText("");
        tp_mostrarCorreo.setText("");
        label_emisor.setText("");
        label_receptor.setText("");
        label_fechaEnvio.setText("");
        chb_leido.setSelected(false);
        bt_limpiar.setEnabled(false);
    }

    private void cargarCuentas() {

        Dba db = new Dba("./Base2.accdb");
        db.conectar();
        try {
            db.query.execute("SELECT DireccionCorreo,Nombre,Apellido,Clave,FechaCreacion FROM Cuentas");
            ResultSet rs = db.query.getResultSet();

            DefaultComboBoxModel model = (DefaultComboBoxModel) cb_ingreso_cuentas.getModel();

            SimpleDateFormat df = new SimpleDateFormat("dd/MM/yyyy");

            while (rs.next()) {

                //System.out.println(rs.getInt(1) + "--->" + rs.getString(2));
                Cuenta c = new Cuenta();
                c.setDireccionCorreoElectronico(rs.getString("DireccionCorreo"));
                c.setNombre(rs.getString("Nombre"));
                c.setApellido(rs.getString("Apellido"));
                c.setClave(rs.getString("Clave"));

                try {
                    c.setFechaDeCreacion(df.parse(rs.getString("FechaCreacion")));
                } catch (ParseException ex) {
                    JOptionPane.showMessageDialog(
                            this,
                            "Error con el parseo de fechas.",
                            "Error de cargado.",
                            JOptionPane.ERROR_MESSAGE
                    );
                }

                model.addElement(c);

            }
        } catch (SQLException ex) {
            System.out.println("Error de conexión.");
        } catch (Exception e) {
            e.printStackTrace();
        }
        db.desconectar();
    }

    private void colorFondo() {
        File f = new File("./ColorFondo.txt");
        if (f.exists()) {
            Scanner sc = null;
            try {
                sc = new Scanner(f);
                sc.useDelimiter(";");

                int r = 0, g = 0, b = 0;
                while (sc.hasNext()) {
                    r = sc.nextInt();
                    g = sc.nextInt();
                    b = sc.nextInt();
                }

                panel.setBackground(
                        new Color(r, g, b)
                );

            } catch (FileNotFoundException ex) {
                JOptionPane.showMessageDialog(this, "El record de color no fue encontrado.", "Error", JOptionPane.ERROR_MESSAGE);
            } finally {
                try {
                    sc.close();
                } catch (NullPointerException ex) {
                }
            }
        }
    }

    private void ingresar() {
        jd_ingreso.setVisible(false);
        panel.setVisible(true);
        pf_ingreso_clave.setText("");
        jmi_logOut.setEnabled(true);
        jmi_cuenta.setEnabled(true);
        jmi_dirCuentas.setEnabled(true);
        jmi_signIn.setEnabled(false);
        DefaultComboBoxModel cbm = (DefaultComboBoxModel) cb_ingreso_cuentas.getModel();
        cb_destinatarios.setModel(cbm);
        cb_filtrados.setModel(cbm);
        cuentaActual.cargarCorreos();
        cargarArbol();
        cuentaActual.cargarChats();
        cuentaActual.cargarGrupos();
        cuentaActual.cargarFiltros();
        cuentaActual.cargarTareas();
        empezarTareas();
    }

    private void cargarArbol() {

        DefaultTreeModel model = new DefaultTreeModel(new DefaultMutableTreeNode("Correos"));

        DefaultMutableTreeNode raiz = (DefaultMutableTreeNode) model.getRoot();
        raiz.add(new DefaultMutableTreeNode("Enviados"));
        raiz.add(new DefaultMutableTreeNode("Recibidos"));
        raiz.add(new DefaultMutableTreeNode("Eliminados"));
        raiz.add(new DefaultMutableTreeNode("Borradores"));
        raiz.add(new DefaultMutableTreeNode("Spam"));

        for (Correo enviado : cuentaActual.getEnviados()) {
            ((DefaultMutableTreeNode) raiz.getChildAt(0)).add(new DefaultMutableTreeNode(enviado));
        }

        for (Correo recibido : cuentaActual.getRecibidos()) {
            ((DefaultMutableTreeNode) raiz.getChildAt(1)).add(new DefaultMutableTreeNode(recibido));
        }

        for (Correo eliminado : cuentaActual.getEliminados()) {
            ((DefaultMutableTreeNode) raiz.getChildAt(2)).add(new DefaultMutableTreeNode(eliminado));
        }

        for (Correo borrador : cuentaActual.getBorradores()) {
            ((DefaultMutableTreeNode) raiz.getChildAt(3)).add(new DefaultMutableTreeNode(borrador));
        }

        for (Correo spam : cuentaActual.getSpam()) {
            ((DefaultMutableTreeNode) raiz.getChildAt(4)).add(new DefaultMutableTreeNode(spam));
        }

        jt_bandejas.setModel(model);
        model.reload();
    }

    public void renovarPane() {
        tp_texto.setFont(new java.awt.Font("Arial", 0, 18)); // NOI18N
        jScrollPane3.setViewportView(tp_texto);
    }

    private boolean verificarDireccion(String direccion) {

        if (!direccion.trim().endsWith("@minigmail.edu")) {
            direccion += "@minigmail.edu";
        }
        DefaultComboBoxModel model = (DefaultComboBoxModel) cb_ingreso_cuentas.getModel();
        if (direccion.equals(label_direccionCorreo.getText())) {
            JOptionPane.showMessageDialog(jd_adminCuenta, "La direccion ingresada es igual a la actual.", "Direccion de correo ya existe", JOptionPane.ERROR_MESSAGE);
            return false;
        }
        for (int i = 0; i < model.getSize(); i++) {
            if (((Cuenta) model.getElementAt(i)).getDireccionCorreoElectronico().equals(direccion)) {
                return false;
            }
        }
        return true;
    }

    private void directorio() {
        DefaultComboBoxModel cmodel = (DefaultComboBoxModel) cb_ingreso_cuentas.getModel();
        DefaultTableModel tmodel = (DefaultTableModel) tb_dir.getModel();

        for (int i = tmodel.getRowCount() - 1; i >= 0; i--) {
            tmodel.removeRow(i);
        }

        for (int i = 0; i < cmodel.getSize(); i++) {
            Cuenta c = (Cuenta) cmodel.getElementAt(i);

            if (!c.equals(cuentaActual)) {

                Object[] row = new Object[]{
                    c.getNombre(),
                    c.getApellido(),
                    c,
                    new SimpleDateFormat("yyyy/MM/dd").format(c.getFechaDeCreacion())
                };

                tmodel.addRow(row);
            }

        }
    }

    private void actualizarAmigos() {
        try {

            DefaultListModel lmodel = (DefaultListModel) list_usuarios.getModel();
            ArrayList<String> arr = new ArrayList();
            for (int i = 0; i < lmodel.getSize(); i++) {
                arr.add((String) lmodel.getElementAt(i));
            }

            salidaObjeto.writeObject(new Pregunta(2, arr));

        } catch (Exception e) {
        }
    }

    private void mostrarPropiedades() {
        if (tb_dir.getSelectedRow() >= 0) {

            Cuenta c = (Cuenta) ((DefaultTableModel) tb_dir.getModel()).getValueAt(
                    tb_dir.getSelectedRow(),
                    2
            );

            label_nombreP.setText(c.getNombre());
            label_apellidoP.setText(c.getApellido());
            label_direccionP.setText(c.getDireccionCorreoElectronico());
            label_fechaP.setText(new SimpleDateFormat("dd - MMMM - yyyy").format(c.getFechaDeCreacion()));

            jd_propiedades.pack();
            jd_propiedades.setModal(true);
            jd_propiedades.setLocationRelativeTo(jd_directorioCuentas);
            jd_propiedades.setVisible(true);
        }
    }

    private void enviarCorreoDir(java.awt.event.ActionEvent evt, Component component) {
        DefaultTableModel tmodel = (DefaultTableModel) tb_dir.getModel();
        Cuenta c = (Cuenta) tmodel.getValueAt(tb_dir.getSelectedRow(), 2);

        DefaultListModel lmodel = (DefaultListModel) list_destinatarios.getModel();

        tp_texto.setText("");
        tf_asunto.setText("");
        cb_destinatarios.setSelectedIndex(-1);
        lmodel.removeAllElements();
        lmodel.addElement(c);

        correoSeleccionado = null;

        miEstilo = "miEstilo" + (contador++);
        estilo = tp_texto.addStyle(miEstilo, null);

        jd_enviarCorreo.pack();
        jd_enviarCorreo.setLocationRelativeTo(component);
        jd_enviarCorreo.setModal(true);
        jd_enviarCorreo.setVisible(true);

    }

    public void limpiarTarea() {
        tf_asuntoTarea.setText("");
        ta_descripTarea.setText("");
        Date d = new Date();
        jdc_inicio.setDate(d);
        jdc_final.setDate(d);
        jdc_finalRep.setDate(d);
        cb_estado.setSelectedIndex(0);
        cb_prioridad.setSelectedIndex(0);
        sp_horas.setValue(8);
        sp_minutos.setValue(0);
        chb_semanal.setSelected(false);
        chb_domingo.setSelected(false);
        chb_lunes.setSelected(false);
        chb_martes.setSelected(false);
        chb_miercoles.setSelected(false);
        chb_jueves.setSelected(false);
        chb_viernes.setSelected(false);
        chb_sabado.setSelected(false);
        rb_sinFecha.setSelected(true);
    }

    private void empezarTareas() {
        for (Tarea tarea : cuentaActual.getTareas()) {
            //if (!tarea.getEstado().equals("Terminado")) {
            HiloTarea ht = new HiloTarea(tarea, cuentaActual);
            ht.start();
            hilosTareas.add(ht);
            //}
        }
    }

}
